// Built with IMPACT - impactjs.org

!function(a){"use strict";if(Number.prototype.map=function(a,b,c,d){return c+(d-c)*((this-a)/(b-a))},Number.prototype.limit=function(a,b){return Math.min(b,Math.max(a,this))},Number.prototype.round=function(a){return a=Math.pow(10,a||0),Math.round(this*a)/a},Number.prototype.floor=function(){return Math.floor(this)},Number.prototype.ceil=function(){return Math.ceil(this)},Number.prototype.toInt=function(){return 0|this},Number.prototype.toRad=function(){return this/180*Math.PI},Number.prototype.toDeg=function(){return 180*this/Math.PI},Array.prototype.erase=function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},Function.prototype.bind=Function.prototype.bind||function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e},a.ig={game:null,debug:null,version:"1.23",global:a,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:a.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(a){return"#"==a.charAt(0)?document.getElementById(a.substr(1)):document.getElementsByTagName(a)},$new:function(a){return document.createElement(a)},copy:function(a){if(!a||"object"!=typeof a||a instanceof HTMLElement||a instanceof ig.Class)return a;if(a instanceof Array){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=ig.copy(a[c]);return b}var b={};for(var c in a)b[c]=ig.copy(a[c]);return b},merge:function(a,b){for(var c in b){var d=b[c];"object"!=typeof d||d instanceof HTMLElement||d instanceof ig.Class||null===d?a[c]=d:(a[c]&&"object"==typeof a[c]||(a[c]=d instanceof Array?[]:{}),ig.merge(a[c],d))}return a},ksort:function(a){if(!a||"object"!=typeof a)return[];var b=[],c=[];for(var d in a)b.push(d);b.sort();for(var d=0;d<b.length;d++)c.push(a[b[d]]);return c},setVendorAttribute:function(a,b,c){var d=b.charAt(0).toUpperCase()+b.substr(1);a[b]=a["ms"+d]=a["moz"+d]=a["webkit"+d]=a["o"+d]=c},getVendorAttribute:function(a,b){var c=b.charAt(0).toUpperCase()+b.substr(1);return a[b]||a["ms"+c]||a["moz"+c]||a["webkit"+c]||a["o"+c]},normalizeVendorAttribute:function(a,b){var c=ig.getVendorAttribute(a,b);!a[b]&&c&&(a[b]=c)},getImagePixels:function(a,b,c,d,e){var f=ig.$new("canvas");f.width=a.width,f.height=a.height;var g=f.getContext("2d");ig.System.SCALE.CRISP(f,g);var h=ig.getVendorAttribute(g,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(g,"getImageDataHD");var i=a.width/h,j=a.height/h;return f.width=Math.ceil(i),f.height=Math.ceil(j),g.drawImage(a,0,0,i,j),1===h?g.getImageData(b,c,d,e):g.getImageDataHD(b,c,d,e)},module:function(a){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[a]&&ig.modules[a].body)throw"Module '"+a+"' is already defined";return ig._current={name:a,requires:[],loaded:!1,body:null},ig.modules[a]=ig._current,ig._loadQueue.push(ig._current),ig},requires:function(){return ig._current.requires=Array.prototype.slice.call(arguments),ig},defines:function(a){ig._current.body=a,ig._current=null,ig._initDOMReady()},addResource:function(a){ig.resources.push(a)},setNocache:function(a){ig.nocache=a?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(a,b){ig.modules[a]={name:a,requires:[],loaded:!1,body:null},ig._waitForOnload++;var c=ig.prefix+ig.lib+a.replace(/\./g,"/")+".js"+ig.nocache,d=ig.$new("script");d.type="text/javascript",d.src=c,d.onload=function(){ig._waitForOnload--,ig._execModules()},d.onerror=function(){throw"Failed to load module "+a+" at "+c+" "+"required from "+b},ig.$("head")[0].appendChild(d)},_execModules:function(){for(var a=!1,b=0;b<ig._loadQueue.length;b++){for(var c=ig._loadQueue[b],d=!0,e=0;e<c.requires.length;e++){var f=c.requires[e];ig.modules[f]?ig.modules[f].loaded||(d=!1):(d=!1,ig._loadScript(f,c.name))}d&&c.body&&(ig._loadQueue.splice(b,1),c.loaded=!0,c.body(),a=!0,b--)}if(a)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){for(var g=[],b=0;b<ig._loadQueue.length;b++){for(var h=[],i=ig._loadQueue[b].requires,e=0;e<i.length;e++){var c=ig.modules[i[e]];c&&c.loaded||h.push(i[e])}g.push(ig._loadQueue[b].name+" (requires: "+h.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+g.join("\n")}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0,ig._waitForOnload--,ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0),ig.ua.pixelRatio=a.devicePixelRatio||1,ig.ua.viewport={width:a.innerWidth,height:a.innerHeight},ig.ua.screen={width:a.screen.availWidth*ig.ua.pixelRatio,height:a.screen.availHeight*ig.ua.pixelRatio},ig.ua.iPhone=/iPhone/i.test(navigator.userAgent),ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio,ig.ua.iPad=/iPad/i.test(navigator.userAgent),ig.ua.android=/android/i.test(navigator.userAgent),ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent),ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad,ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent),ig.ua.touchDevice="ontouchstart"in a||a.navigator.msMaxTouchPoints},_initDOMReady:function(){return ig.modules["dom.ready"]?(ig._execModules(),void 0):(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),a.addEventListener("load",ig._DOMReady,!1)),void 0)}},ig.normalizeVendorAttribute(a,"requestAnimationFrame"),a.requestAnimationFrame){var b=1,c={};a.ig.setAnimation=function(d,e){var f=b++;c[f]=!0;var g=function(){c[f]&&(a.requestAnimationFrame(g,e),d())};return a.requestAnimationFrame(g,e),f},a.ig.clearAnimation=function(a){delete c[a]}}else a.ig.setAnimation=function(b){return a.setInterval(b,1e3/60)},a.ig.clearAnimation=function(b){a.clearInterval(b)};var d=!1,e=/xyz/.test(function(){})?/\bparent\b/:/.*/,f=0;a.ig.Class=function(){};var g=function(a){var b=this.prototype,c={};for(var d in a)"function"==typeof a[d]&&"function"==typeof b[d]&&e.test(a[d])?(c[d]=b[d],b[d]=function(a,b){return function(){var d=this.parent;this.parent=c[a];var e=b.apply(this,arguments);return this.parent=d,e}}(d,a[d])):b[d]=a[d]};a.ig.Class.extend=function(b){function j(){if(!d){if(this.staticInstantiate){var a=this.staticInstantiate.apply(this,arguments);if(a)return a}for(var b in this)"object"==typeof this[b]&&(this[b]=ig.copy(this[b]));this.init&&this.init.apply(this,arguments)}return this}var c=this.prototype;d=!0;var h=new this;d=!1;for(var i in b)h[i]="function"==typeof b[i]&&"function"==typeof c[i]&&e.test(b[i])?function(a,b){return function(){var d=this.parent;this.parent=c[a];var e=b.apply(this,arguments);return this.parent=d,e}}(i,b[i]):b[i];return j.prototype=h,j.prototype.constructor=j,j.extend=a.ig.Class.extend,j.inject=g,j.classId=h.classId=++f,j},a.ImpactMixin&&ig.merge(ig,a.ImpactMixin)}(window),ig.baked=!0,ig.module("impact.image").defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(a){return ig.Image.cache[a]||null},init:function(a){this.path=a,this.load()},load:function(a){return this.loaded?(a&&a(this.path,!0),void 0):(!this.loaded&&ig.ready?(this.loadCallback=a||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),ig.Image.cache[this.path]=this,void 0)},reload:function(){this.loaded=!1,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width,this.height=this.data.height,this.loaded=!0,1!=ig.system.scale&&this.resize(ig.system.scale),this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0,this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(a){var b=ig.getImagePixels(this.data,0,0,this.width,this.height),c=this.width*a,d=this.height*a,e=ig.$new("canvas");e.width=c,e.height=d;for(var f=e.getContext("2d"),g=f.getImageData(0,0,c,d),h=0;d>h;h++)for(var i=0;c>i;i++){var j=4*(Math.floor(h/a)*this.width+Math.floor(i/a)),k=4*(h*c+i);g.data[k]=b.data[j],g.data[k+1]=b.data[j+1],g.data[k+2]=b.data[j+2],g.data[k+3]=b.data[j+3]}f.putImageData(g,0,0),this.data=e},draw:function(a,b,c,d,e,f){if(this.loaded){var g=ig.system.scale;c=c?c*g:0,d=d?d*g:0,e=(e?e:this.width)*g,f=(f?f:this.height)*g,ig.system.context.drawImage(this.data,c,d,e,f,ig.system.getDrawPos(a),ig.system.getDrawPos(b),e,f),ig.Image.drawCount++}},drawTile:function(a,b,c,d,e,f,g){if(e=e?e:d,!(!this.loaded||d>this.width||e>this.height)){var h=ig.system.scale,i=Math.floor(d*h),j=Math.floor(e*h),k=f?-1:1,l=g?-1:1;(f||g)&&(ig.system.context.save(),ig.system.context.scale(k,l)),ig.system.context.drawImage(this.data,Math.floor(c*d)%this.width*h,Math.floor(c*d/this.width)*e*h,i,j,ig.system.getDrawPos(a)*k-(f?i:0),ig.system.getDrawPos(b)*l-(g?j:0),i,j),(f||g)&&ig.system.context.restore(),ig.Image.drawCount++}}}),ig.Image.drawCount=0,ig.Image.cache={},ig.Image.reloadCache=function(){for(var a in ig.Image.cache)ig.Image.cache[a].reload()}}),ig.baked=!0,ig.module("impact.font").requires("impact.image").defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(a){this._loadMetrics(this.data),this.parent(a)},widthForString:function(a){if(-1!==a.indexOf("\n")){for(var b=a.split("\n"),c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(a)},_widthForLine:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.widthMap[a.charCodeAt(c)-this.firstChar]+this.letterSpacing;return b},heightForString:function(a){return a.split("\n").length*(this.height+this.lineSpacing)},draw:function(a,b,c,d){if("string"!=typeof a&&(a=a.toString()),-1===a.indexOf("\n")){if(d==ig.Font.ALIGN.RIGHT||d==ig.Font.ALIGN.CENTER){var h=this._widthForLine(a);b-=d==ig.Font.ALIGN.CENTER?h/2:h}1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(var g=0;g<a.length;g++){var i=a.charCodeAt(g);b+=this._drawChar(i-this.firstChar,b,c)}1!==this.alpha&&(ig.system.context.globalAlpha=1),ig.Image.drawCount+=a.length}else for(var e=a.split("\n"),f=this.height+this.lineSpacing,g=0;g<e.length;g++)this.draw(e[g],b,c+g*f,d)},_drawChar:function(a,b,c){if(!this.loaded||0>a||a>=this.indices.length)return 0;var d=ig.system.scale,e=this.indices[a]*d,f=0,g=this.widthMap[a]*d,h=(this.height-2)*d;return ig.system.context.drawImage(this.data,e,f,g,h,ig.system.getDrawPos(b),ig.system.getDrawPos(c),g,h),this.widthMap[a]+this.letterSpacing},_loadMetrics:function(a){this.height=a.height-1,this.widthMap=[],this.indices=[];for(var b=ig.getImagePixels(a,0,a.height-1,a.width,1),c=0,d=0,e=0;e<a.width;e++){var f=4*e+3;b.data[f]>127?d++:b.data[f]<128&&d&&(this.widthMap.push(d),this.indices.push(e-d),c++,d=0)}this.widthMap.push(d),this.indices.push(e-d)}}),ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}}),ig.baked=!0,ig.module("impact.sound").defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)return ig.Sound.enabled=!1,void 0;for(var a=new Audio,b=0;b<ig.Sound.use.length;b++){var c=ig.Sound.use[b];if(a.canPlayType(c.mime)){this.format=c;break}}this.format||(ig.Sound.enabled=!1),ig.Sound.enabled&&ig.Sound.useWebAudio&&(this.audioContext=new AudioContext)},load:function(a,b,c){return b&&ig.Sound.useWebAudio?this.loadWebAudio(a,b,c):this.loadHTML5Audio(a,b,c)},loadWebAudio:function(a,b,c){var d=ig.prefix+a.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[a])return this.clips[a];var e=new ig.Sound.WebAudioSource;this.clips[a]=e;var f=new XMLHttpRequest;f.open("GET",d,!0),f.responseType="arraybuffer";var g=this;return f.onload=function(b){g.audioContext.decodeAudioData(f.response,function(d){e.buffer=d,c(a,!0,b)},function(b){c(a,!1,b)})},f.onerror=function(b){c(a,!1,b)},f.send(),e},loadHTML5Audio:function(a,b,c){var d=ig.prefix+a.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[a]){if(this.clips[a]instanceof ig.Sound.WebAudioSource)return this.clips[a];if(b&&this.clips[a].length<ig.Sound.channels)for(var e=this.clips[a].length;e<ig.Sound.channels;e++){var f=new Audio(d);f.load(),this.clips[a].push(f)}return this.clips[a][0]}var g=new Audio(d);if(c&&(g.addEventListener("canplaythrough",function h(b){g.removeEventListener("canplaythrough",h,!1),c(a,!0,b)},!1),g.addEventListener("error",function(b){c(a,!1,b)},!1)),g.preload="auto",g.load(),this.clips[a]=[g],b)for(var e=1;e<ig.Sound.channels;e++){var f=new Audio(d);f.load(),this.clips[a].push(f)}return g},get:function(a){var b=this.clips[a];if(b&&b instanceof ig.Sound.WebAudioSource)return b;for(var d,c=0;d=b[c++];)if(d.paused||d.ended)return d.ended&&(d.currentTime=0),d;return b[0].pause(),b[0].currentTime=0,b[0]}}),ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this),Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})},add:function(a,b){if(ig.Sound.enabled){var c=a instanceof ig.Sound?a.path:a,d=ig.soundManager.load(c,!1);if(d instanceof ig.Sound.WebAudioSource)throw ig.system.stopRunLoop(),"Sound '"+c+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)";d.loop=this._loop,d.volume=this._volume,d.addEventListener("ended",this._endedCallbackBound,!1),this.tracks.push(d),b&&(this.namedTracks[b]=d),this.currentTrack||(this.currentTrack=d)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(a){if(a&&this.namedTracks[a]){var b=this.namedTracks[a];b!=this.currentTrack&&(this.stop(),this.currentTrack=b)}else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(a){this._loop=a;for(var b in this.tracks)this.tracks[b].loop=a},getVolume:function(){return this._volume},setVolume:function(a){this._volume=a.limit(0,1);for(var b in this.tracks)this.tracks[b].volume=this._volume},fadeOut:function(a){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(a),this._fadeInterval=setInterval(this._fadeStep.bind(this),50))},_fadeStep:function(){var a=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;.01>=a?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=a},_endedCallback:function(){this._loop?this.play():this.next()}}),ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,_loop:!1,init:function(a,b){this.path=a,this.multiChannel=b!==!1,Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)}),this.load()},getLooping:function(){return this._loop},setLooping:function(a){this._loop=a,this.currentClip&&(this.currentClip.loop=a)},load:function(a){return ig.Sound.enabled?(ig.ready?ig.soundManager.load(this.path,this.multiChannel,a):ig.addResource(this),void 0):(a&&a(this.path,!0),void 0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.loop=this._loop,this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}}),ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:!1,init:function(){this.gain=ig.soundManager.audioContext.createGain(),this.gain.connect(ig.soundManager.audioContext.destination),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)}),Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)})},play:function(){if(this.buffer){var a=ig.soundManager.audioContext.createBufferSource();a.buffer=this.buffer,a.connect(this.gain),a.loop=this._loop;var b=this;this.sources.push(a),a.onended=function(){b.sources.erase(a)},a.start(0)}},pause:function(){for(var a=0;a<this.sources.length;a++)try{this.sources[a].stop()}catch(b){}},getLooping:function(){return this._loop},setLooping:function(a){this._loop=a;for(var b=0;b<this.sources.length;b++)this.sources[b].loop=a},getVolume:function(){return this.gain.gain.value},setVolume:function(a){this.gain.gain.value=a}}),ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},CAF:{ext:"caf",mime:"audio/x-caf"}},ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3],ig.Sound.channels=4,ig.Sound.enabled=!0,ig.normalizeVendorAttribute(window,"AudioContext"),ig.Sound.useWebAudio=!!window.AudioContext}),ig.baked=!0,ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(a,b){this.gameClass=a,this.resources=b,this._loadCallbackBound=this._loadCallback.bind(this);for(var c=0;c<this.resources.length;c++)this._unloaded.push(this.resources[c].path)},load:function(){if(ig.system.clear("#000"),!this.resources.length)return this.end(),void 0;for(var a=0;a<this.resources.length;a++)this.loadResource(this.resources[a]);this._intervalId=setInterval(this.draw.bind(this),16)},loadResource:function(a){a.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId),ig.system.setGame(this.gameClass))},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var a=ig.system.scale,b=.6*ig.system.width,c=.1*ig.system.height,d=.5*ig.system.width-b/2,e=.5*ig.system.height-c/2;ig.system.context.fillStyle="#000",ig.system.context.fillRect(0,0,480,320),ig.system.context.fillStyle="#fff",ig.system.context.fillRect(d*a,e*a,b*a,c*a),ig.system.context.fillStyle="#000",ig.system.context.fillRect(d*a+a,e*a+a,b*a-a-a,c*a-a-a),ig.system.context.fillStyle="#fff",ig.system.context.fillRect(d*a,e*a,b*a*this._drawStatus,c*a)},_loadCallback:function(a,b){if(!b)throw"Failed to load resource: "+a;this._unloaded.erase(a),this.status=1-this._unloaded.length/this.resources.length,0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})}),ig.baked=!0,ig.module("impact.timer").defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(a){this.base=ig.Timer.time,this.last=ig.Timer.time,this.target=a||0},set:function(a){this.target=a||0,this.base=ig.Timer.time,this.pausedAt=0},reset:function(){this.base=ig.Timer.time,this.pausedAt=0},tick:function(){var a=ig.Timer.time-this.last;return this.last=ig.Timer.time,this.pausedAt?0:a},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}}),ig.Timer._last=0,ig.Timer.time=Number.MIN_VALUE,ig.Timer.timeScale=1,ig.Timer.maxStep=.05,ig.Timer.step=function(){var a=Date.now(),b=(a-ig.Timer._last)/1e3;ig.Timer.time+=Math.min(b,ig.Timer.maxStep)*ig.Timer.timeScale,ig.Timer._last=a}}),ig.baked=!0,ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(a,b,c,d,e){this.fps=b,this.clock=new ig.Timer,this.canvas=ig.$(a),this.resize(c,d,e),this.context=this.canvas.getContext("2d"),this.getDrawPos=ig.System.drawMode,1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP),ig.System.scaleMode(this.canvas,this.context)},resize:function(a,b,c){this.width=a,this.height=b,this.scale=c||this.scale,this.realWidth=this.width*this.scale,this.realHeight=this.height*this.scale,this.canvas.width=this.realWidth,this.canvas.height=this.realHeight},setGame:function(a){this.running?this.newGameClass=a:this.setGameNow(a)},setGameNow:function(a){ig.game=new a,ig.system.setDelegate(ig.game)},setDelegate:function(a){if("function"!=typeof a.run)throw"System.setDelegate: No run() function in object";this.delegate=a,this.startRunLoop()},stopRunLoop:function(){ig.clearAnimation(this.animationId),this.running=!1},startRunLoop:function(){this.stopRunLoop(),this.animationId=ig.setAnimation(this.run.bind(this),this.canvas),this.running=!0},clear:function(a){this.context.fillStyle=a,this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step(),this.tick=this.clock.tick(),this.delegate.run(),ig.input.clearPressed(),this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null}),ig.System.DRAW={AUTHENTIC:function(a){return Math.round(a)*this.scale},SMOOTH:function(a){return Math.round(a*this.scale)},SUBPIXEL:function(a){return a*this.scale}},ig.System.drawMode=ig.System.DRAW.SMOOTH,ig.System.SCALE={CRISP:function(a,b){ig.setVendorAttribute(b,"imageSmoothingEnabled",!1),a.style.imageRendering="-moz-crisp-edges",a.style.imageRendering="-o-crisp-edges",a.style.imageRendering="-webkit-optimize-contrast",a.style.imageRendering="crisp-edges",a.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(a,b){ig.setVendorAttribute(b,"imageSmoothingEnabled",!0),a.style.imageRendering="",a.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH}),ig.baked=!0,ig.module("impact.input").defines(function(){"use strict";ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190},ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=!0;var a=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",a,!1),ig.system.canvas.addEventListener("DOMMouseScroll",a,!1),ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1),ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1),ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(a){var b=a.wheelDelta?a.wheelDelta:-1*a.detail,c=b>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN,d=this.bindings[c];d&&(this.actions[d]=!0,this.presses[d]=!0,this.delayedKeyup[d]=!0,a.stopPropagation(),a.preventDefault())},mousemove:function(a){var b=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,c=ig.system.scale*(b/ig.system.realWidth),d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());var e=a.touches?a.touches[0]:a;this.mouse.x=(e.clientX-d.left)/c,this.mouse.y=(e.clientY-d.top)/c},contextmenu:function(a){this.bindings[ig.KEY.MOUSE2]&&(a.stopPropagation(),a.preventDefault())},keydown:function(a){var b=a.target.tagName;if("INPUT"!=b&&"TEXTAREA"!=b){var c="keydown"==a.type?a.keyCode:2==a.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1;("touchstart"==a.type||"mousedown"==a.type)&&this.mousemove(a);var d=this.bindings[c];d&&(this.actions[d]=!0,this.locks[d]||(this.presses[d]=!0,this.locks[d]=!0),a.stopPropagation(),a.preventDefault())}},keyup:function(a){var b=a.target.tagName;if("INPUT"!=b&&"TEXTAREA"!=b){var c="keyup"==a.type?a.keyCode:2==a.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,d=this.bindings[c];d&&(this.delayedKeyup[d]=!0,a.stopPropagation(),a.preventDefault())}},devicemotion:function(a){this.accel=a.accelerationIncludingGravity},bind:function(a,b){0>a?this.initMouse():a>0&&this.initKeyboard(),this.bindings[a]=b},bindTouch:function(a,b){var c=ig.$(a),d=this;c.addEventListener("touchstart",function(a){d.touchStart(a,b)},!1),c.addEventListener("touchend",function(a){d.touchEnd(a,b)},!1),c.addEventListener("MSPointerDown",function(a){d.touchStart(a,b)},!1),c.addEventListener("MSPointerUp",function(a){d.touchEnd(a,b)},!1)},unbind:function(a){var b=this.bindings[a];this.delayedKeyup[b]=!0,this.bindings[a]=null},unbindAll:function(){this.bindings={},this.actions={},this.presses={},this.locks={},this.delayedKeyup={}},state:function(a){return this.actions[a]},pressed:function(a){return this.presses[a]},released:function(a){return!!this.delayedKeyup[a]},clearPressed:function(){for(var a in this.delayedKeyup)this.actions[a]=!1,this.locks[a]=!1;this.delayedKeyup={},this.presses={}},touchStart:function(a,b){return this.actions[b]=!0,this.presses[b]=!0,a.stopPropagation(),a.preventDefault(),!1},touchEnd:function(a,b){return this.delayedKeyup[b]=!0,a.stopPropagation(),a.preventDefault(),!1}})}),ig.baked=!0,ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){"use strict";ig.main=function(a,b,c,d,e,f,g){ig.system=new ig.System(a,c,d,e,f||1),ig.input=new ig.Input,ig.soundManager=new ig.SoundManager,ig.music=new ig.Music,ig.ready=!0;var h=new(g||ig.Loader)(b,ig.resources);h.load()}}),ig.baked=!0,ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(a,b,c){this.width=b,this.height=c,this.image=new ig.Image(a)}}),ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(a,b,c,d){this.sheet=a,this.pivot={x:a.width/2,y:a.height/2},this.timer=new ig.Timer,this.frameTime=b,this.sequence=c,this.stop=!!d,this.tile=this.sequence[0]},rewind:function(){return this.timer.set(),this.loopCount=0,this.frame=0,this.tile=this.sequence[0],this},gotoFrame:function(a){this.timer.set(this.frameTime*-a-1e-4),this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var a=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(a/this.sequence.length),this.frame=this.stop&&this.loopCount>0?this.sequence.length-1:a%this.sequence.length,this.tile=this.sequence[this.frame]},draw:function(a,b){var c=Math.max(this.sheet.width,this.sheet.height);a>ig.system.width||b>ig.system.height||0>a+c||0>b+c||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(a,b,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(a+this.pivot.x),ig.system.getDrawPos(b+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})}),ig.baked=!0,ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:44..toRad(),max:136..toRad()},init:function(a,b,c){this.id=++ig.Entity._lastId,this.pos.x=this.last.x=a,this.pos.y=this.last.y=b,ig.merge(this,c)},reset:function(a,b,c){var d=this.constructor.prototype;this.pos.x=a,this.pos.y=b,this.last.x=a,this.last.y=b,this.vel.x=d.vel.x,this.vel.y=d.vel.y,this.accel.x=d.accel.x,this.accel.y=d.accel.y,this.health=d.health,this._killed=d._killed,this.standing=d.standing,this.type=d.type,this.checkAgainst=d.checkAgainst,this.collides=d.collides,ig.merge(this,c)},addAnim:function(a,b,c,d){if(!this.animSheet)throw"No animSheet to add the animation "+a+" to.";var e=new ig.Animation(this.animSheet,b,c,d);return this.anims[a]=e,this.currentAnim||(this.currentAnim=e),e},update:function(){this.last.x=this.pos.x,this.last.y=this.pos.y,this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor,this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x),this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var a=this.vel.x*ig.system.tick,b=this.vel.y*ig.system.tick,c=ig.game.collisionMap.trace(this.pos.x,this.pos.y,a,b,this.size.x,this.size.y);this.handleMovementTrace(c),this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(a,b,c,d){if(b)return(a+b*ig.system.tick).limit(-d,d);if(c){var e=c*ig.system.tick;return a-e>0?a-e:0>a+e?a+e:0}return a.limit(-d,d)},handleMovementTrace:function(a){if(this.standing=!1,a.collision.y&&(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(this.vel.y>0&&(this.standing=!0),this.vel.y=0)),a.collision.x&&(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*=-this.bounciness:this.vel.x=0),a.collision.slope){var b=a.collision.slope;if(this.bounciness>0){var c=this.vel.x*b.nx+this.vel.y*b.ny;this.vel.x=(this.vel.x-2*b.nx*c)*this.bounciness,this.vel.y=(this.vel.y-2*b.ny*c)*this.bounciness}else{var d=b.x*b.x+b.y*b.y,e=(this.vel.x*b.x+this.vel.y*b.y)/d;
this.vel.x=b.x*e,this.vel.y=b.y*e;var f=Math.atan2(b.x,b.y);f>this.slopeStanding.min&&f<this.slopeStanding.max&&(this.standing=!0)}}this.pos=a.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(a){this.health-=a,this.health<=0&&this.kill()},touches:function(a){return!(this.pos.x>=a.pos.x+a.size.x||this.pos.x+this.size.x<=a.pos.x||this.pos.y>=a.pos.y+a.size.y||this.pos.y+this.size.y<=a.pos.y)},distanceTo:function(a){var b=this.pos.x+this.size.x/2-(a.pos.x+a.size.x/2),c=this.pos.y+this.size.y/2-(a.pos.y+a.size.y/2);return Math.sqrt(b*b+c*c)},angleTo:function(a){return Math.atan2(a.pos.y+a.size.y/2-(this.pos.y+this.size.y/2),a.pos.x+a.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}}),ig.Entity._lastId=0,ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8},ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3},ig.Entity.checkPair=function(a,b){a.checkAgainst&b.type&&a.check(b),b.checkAgainst&a.type&&b.check(a),a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE&&ig.Entity.solveCollision(a,b)},ig.Entity.solveCollision=function(a,b){var c=null;a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED?c=a:(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED)&&(c=b),a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x?(a.last.y<b.last.y?ig.Entity.seperateOnYAxis(a,b,c):ig.Entity.seperateOnYAxis(b,a,c),a.collideWith(b,"y"),b.collideWith(a,"y")):a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y&&(a.last.x<b.last.x?ig.Entity.seperateOnXAxis(a,b,c):ig.Entity.seperateOnXAxis(b,a,c),a.collideWith(b,"x"),b.collideWith(a,"x"))},ig.Entity.seperateOnXAxis=function(a,b,c){var d=a.pos.x+a.size.x-b.pos.x;if(c){var e=a===c?b:a;c.vel.x=-c.vel.x*c.bounciness+e.vel.x;var f=ig.game.collisionMap.trace(c.pos.x,c.pos.y,c==a?-d:d,0,c.size.x,c.size.y);c.pos.x=f.pos.x}else{var g=(a.vel.x-b.vel.x)/2;a.vel.x=-g,b.vel.x=g;var h=ig.game.collisionMap.trace(a.pos.x,a.pos.y,-d/2,0,a.size.x,a.size.y);a.pos.x=Math.floor(h.pos.x);var i=ig.game.collisionMap.trace(b.pos.x,b.pos.y,d/2,0,b.size.x,b.size.y);b.pos.x=Math.ceil(i.pos.x)}},ig.Entity.seperateOnYAxis=function(a,b,c){var d=a.pos.y+a.size.y-b.pos.y;if(c){var e=a===c?b:a;c.vel.y=-c.vel.y*c.bounciness+e.vel.y;var f=0;c==a&&Math.abs(c.vel.y-e.vel.y)<c.minBounceVelocity&&(c.standing=!0,f=e.vel.x*ig.system.tick);var g=ig.game.collisionMap.trace(c.pos.x,c.pos.y,f,c==a?-d:d,c.size.x,c.size.y);c.pos.y=g.pos.y,c.pos.x=g.pos.x}else if(ig.game.gravity&&(b.standing||a.vel.y>0)){var h=ig.game.collisionMap.trace(a.pos.x,a.pos.y,0,-(a.pos.y+a.size.y-b.pos.y),a.size.x,a.size.y);a.pos.y=h.pos.y,a.bounciness>0&&a.vel.y>a.minBounceVelocity?a.vel.y*=-a.bounciness:(a.standing=!0,a.vel.y=0)}else{var i=(a.vel.y-b.vel.y)/2;a.vel.y=-i,b.vel.y=i;var f=b.vel.x*ig.system.tick,h=ig.game.collisionMap.trace(a.pos.x,a.pos.y,f,-d/2,a.size.x,a.size.y);a.pos.y=h.pos.y;var j=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,d/2,b.size.x,b.size.y);b.pos.y=j.pos.y}}}),ig.baked=!0,ig.module("impact.map").defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(a,b){this.tilesize=a,this.data=b,this.height=b.length,this.width=b[0].length,this.pxWidth=this.width*this.tilesize,this.pxHeight=this.height*this.tilesize},getTile:function(a,b){var c=Math.floor(a/this.tilesize),d=Math.floor(b/this.tilesize);return c>=0&&c<this.width&&d>=0&&d<this.height?this.data[d][c]:0},setTile:function(a,b,c){var d=Math.floor(a/this.tilesize),e=Math.floor(b/this.tilesize);d>=0&&d<this.width&&e>=0&&e<this.height&&(this.data[e][d]=c)}})}),ig.baked=!0,ig.module("impact.collision-map").requires("impact.map").defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(a,b,c){this.parent(a,b),this.tiledef=c||ig.CollisionMap.defaultTileDef;for(var d in this.tiledef)d|0>this.lastSlope&&(this.lastSlope=0|d)},trace:function(a,b,c,d,e,f){var g={collision:{x:!1,y:!1,slope:!1},pos:{x:a,y:b},tile:{x:0,y:0}},h=Math.ceil(Math.max(Math.abs(c),Math.abs(d))/this.tilesize);if(h>1)for(var i=c/h,j=d/h,k=0;h>k&&(i||j)&&(this._traceStep(g,a,b,i,j,e,f,c,d,k),a=g.pos.x,b=g.pos.y,g.collision.x&&(i=0,c=0),g.collision.y&&(j=0,d=0),!g.collision.slope);k++);else this._traceStep(g,a,b,c,d,e,f,c,d,0);return g},_traceStep:function(a,b,c,d,e,f,g,h,i,j){a.pos.x+=d,a.pos.y+=e;var k=0;if(d){var l=d>0?f:0,m=0>d?this.tilesize:0,n=Math.max(Math.floor(c/this.tilesize),0),o=Math.min(Math.ceil((c+g)/this.tilesize),this.height),p=Math.floor((a.pos.x+l)/this.tilesize),q=Math.floor((b+l)/this.tilesize);if((j>0||p==q||0>q||q>=this.width)&&(q=-1),p>=0&&p<this.width)for(var r=n;o>r&&!(-1!=q&&(k=this.data[r][q],k>1&&k<=this.lastSlope&&this._checkTileDef(a,k,b,c,h,i,f,g,q,r)));r++)if(k=this.data[r][p],1==k||k>this.lastSlope||k>1&&this._checkTileDef(a,k,b,c,h,i,f,g,p,r)){if(k>1&&k<=this.lastSlope&&a.collision.slope)break;a.collision.x=!0,a.tile.x=k,b=a.pos.x=p*this.tilesize-l+m,h=0;break}}if(e){var s=e>0?g:0,t=0>e?this.tilesize:0,u=Math.max(Math.floor(a.pos.x/this.tilesize),0),v=Math.min(Math.ceil((a.pos.x+f)/this.tilesize),this.width),r=Math.floor((a.pos.y+s)/this.tilesize),w=Math.floor((c+s)/this.tilesize);if((j>0||r==w||0>w||w>=this.height)&&(w=-1),r>=0&&r<this.height)for(var p=u;v>p&&!(-1!=w&&(k=this.data[w][p],k>1&&k<=this.lastSlope&&this._checkTileDef(a,k,b,c,h,i,f,g,p,w)));p++)if(k=this.data[r][p],1==k||k>this.lastSlope||k>1&&this._checkTileDef(a,k,b,c,h,i,f,g,p,r)){if(k>1&&k<=this.lastSlope&&a.collision.slope)break;a.collision.y=!0,a.tile.y=k,a.pos.y=r*this.tilesize-s+t;break}}},_checkTileDef:function(a,b,c,d,e,f,g,h,i,j){var k=this.tiledef[b];if(!k)return!1;var l=(i+k[0])*this.tilesize,m=(j+k[1])*this.tilesize,n=(k[2]-k[0])*this.tilesize,o=(k[3]-k[1])*this.tilesize,p=k[4],q=c+e+(0>o?g:0)-l,r=d+f+(n>0?h:0)-m;if(n*r-o*q>0){if(0>e*-o+f*n)return p;var s=Math.sqrt(n*n+o*o),t=o/s,u=-n/s,v=q*t+r*u,w=t*v,x=u*v;return w*w+x*x>=e*e+f*f?p||.5>n*(r-f)-o*(q-e):(a.pos.x=c+e-w,a.pos.y=d+f-x,a.collision.slope={x:n,y:o,nx:t,ny:u},!0)}return!1}});var a=.5,b=1/3,c=2/3,d=!0,e=!1;ig.CollisionMap.defaultTileDef={5:[0,1,1,c,d],6:[0,c,1,b,d],7:[0,b,1,0,d],3:[0,1,1,a,d],4:[0,a,1,0,d],2:[0,1,1,0,d],10:[a,1,1,0,d],21:[0,1,a,0,d],32:[c,1,1,0,d],43:[b,1,c,0,d],54:[0,1,b,0,d],27:[0,0,1,b,d],28:[0,b,1,c,d],29:[0,c,1,1,d],25:[0,0,1,a,d],26:[0,a,1,1,d],24:[0,0,1,1,d],11:[0,0,a,1,d],22:[a,0,1,1,d],33:[0,0,b,1,d],44:[b,0,c,1,d],55:[c,0,1,1,d],16:[1,b,0,0,d],17:[1,c,0,b,d],18:[1,1,0,c,d],14:[1,a,0,0,d],15:[1,1,0,a,d],13:[1,1,0,0,d],8:[a,1,0,0,d],19:[1,1,a,0,d],30:[b,1,0,0,d],41:[c,1,b,0,d],52:[1,1,c,0,d],38:[1,c,0,1,d],39:[1,b,0,c,d],40:[1,0,0,b,d],36:[1,a,0,1,d],37:[1,0,0,a,d],35:[1,0,0,1,d],9:[1,0,a,1,d],20:[a,0,0,1,d],31:[1,0,c,1,d],42:[c,0,b,1,d],53:[b,0,0,1,d],12:[0,0,1,0,e],23:[1,1,0,1,e],34:[1,0,1,1,e],45:[0,1,0,0,e]},ig.CollisionMap.staticNoCollision={trace:function(a,b,c,d){return{collision:{x:!1,y:!1,slope:!1},pos:{x:a+c,y:b+d},tile:{x:0,y:0}}}}}),ig.baked=!0,ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(a,b,c){this.parent(a,b),this.setTileset(c)},setTileset:function(a){this.tilesetName=a instanceof ig.Image?a.path:a,this.tiles=new ig.Image(this.tilesetName),this.preRenderedChunks=null},setScreenPos:function(a,b){this.scroll.x=a/this.distance,this.scroll.y=b/this.distance},preRenderMapToChunks:function(){var a=this.width*this.tilesize*ig.system.scale,b=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(a,b),this.chunkSize);var c=Math.ceil(a/this.chunkSize),d=Math.ceil(b/this.chunkSize);this.preRenderedChunks=[];for(var e=0;d>e;e++){this.preRenderedChunks[e]=[];for(var f=0;c>f;f++){var g=f==c-1?a-f*this.chunkSize:this.chunkSize,h=e==d-1?b-e*this.chunkSize:this.chunkSize;this.preRenderedChunks[e][f]=this.preRenderChunk(f,e,g,h)}}},preRenderChunk:function(a,b,c,d){var e=c/this.tilesize/ig.system.scale+1,f=d/this.tilesize/ig.system.scale+1,g=a*this.chunkSize/ig.system.scale%this.tilesize,h=b*this.chunkSize/ig.system.scale%this.tilesize,i=Math.floor(a*this.chunkSize/this.tilesize/ig.system.scale),j=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale),k=ig.$new("canvas");k.width=c,k.height=d,k.retinaResolutionEnabled=!1;var l=k.getContext("2d");ig.System.scaleMode(k,l);var m=ig.system.context;ig.system.context=l;for(var n=0;e>n;n++)for(var o=0;f>o;o++)if(n+i<this.width&&o+j<this.height){var p=this.data[o+j][n+i];p&&this.tiles.drawTile(n*this.tilesize-g,o*this.tilesize-h,p-1,this.tilesize)}return ig.system.context=m,k},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var a=ig.system.getDrawPos(this.scroll.x),b=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var c=this.width*this.tilesize*ig.system.scale;a=(a%c+c)%c;var d=this.height*this.tilesize*ig.system.scale;b=(b%d+d)%d}var e=Math.max(Math.floor(a/this.chunkSize),0),f=Math.max(Math.floor(b/this.chunkSize),0),g=Math.ceil((a+ig.system.realWidth)/this.chunkSize),h=Math.ceil((b+ig.system.realHeight)/this.chunkSize),i=this.preRenderedChunks[0].length,j=this.preRenderedChunks.length;this.repeat||(g=Math.min(g,i),h=Math.min(h,j));for(var k=0,l=f;h>l;l++){for(var m=0,n=e;g>n;n++){var o=this.preRenderedChunks[l%j][n%i],p=-a+n*this.chunkSize-m,q=-b+l*this.chunkSize-k;ig.system.context.drawImage(o,p,q),ig.Image.drawCount++,this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(p,q,this.chunkSize,this.chunkSize)),this.repeat&&o.width<this.chunkSize&&p+o.width<ig.system.realWidth&&(m+=this.chunkSize-o.width,g++)}this.repeat&&o.height<this.chunkSize&&q+o.height<ig.system.realHeight&&(k+=this.chunkSize-o.height,h++)}},drawTiled:function(){for(var a=0,b=null,c=(this.scroll.x/this.tilesize).toInt(),d=(this.scroll.y/this.tilesize).toInt(),e=this.scroll.x%this.tilesize,f=this.scroll.y%this.tilesize,g=-e-this.tilesize,h=-f-this.tilesize,i=ig.system.width+this.tilesize-e,j=ig.system.height+this.tilesize-f,k=-1,l=h;j>l;k++,l+=this.tilesize){var m=k+d;if(m>=this.height||0>m){if(!this.repeat)continue;m=(m%this.height+this.height)%this.height}for(var n=-1,o=g;i>o;n++,o+=this.tilesize){var p=n+c;if(p>=this.width||0>p){if(!this.repeat)continue;p=(p%this.width+this.width)%this.width}(a=this.data[m][p])&&((b=this.anims[a-1])?b.draw(o,l):this.tiles.drawTile(o,l,a-1,this.tilesize))}}}})}),ig.baked=!0,ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){return this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX,ig.game=this,null},loadLevel:function(a){this.screen={x:0,y:0},this.entities=[],this.namedEntities={};for(var b=0;b<a.entities.length;b++){var c=a.entities[b];this.spawnEntity(c.type,c.x,c.y,c.settings)}this.sortEntities(),this.collisionMap=ig.CollisionMap.staticNoCollision,this.backgroundMaps=[];for(var b=0;b<a.layer.length;b++){var d=a.layer[b];if("collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);e.anims=this.backgroundAnims[d.tilesetName]||{},e.repeat=d.repeat,e.distance=d.distance,e.foreground=!!d.foreground,e.preRender=!!d.preRender,e.name=d.name,this.backgroundMaps.push(e)}}for(var b=0;b<this.entities.length;b++)this.entities[b].ready()},loadLevelDeferred:function(a){this._levelToLoad=a},getMapByName:function(a){if("collision"==a)return this.collisionMap;for(var b=0;b<this.backgroundMaps.length;b++)if(this.backgroundMaps[b].name==a)return this.backgroundMaps[b];return null},getEntityByName:function(a){return this.namedEntities[a]},getEntitiesByType:function(a){for(var b="string"==typeof a?ig.global[a]:a,c=[],d=0;d<this.entities.length;d++){var e=this.entities[d];e instanceof b&&!e._killed&&c.push(e)}return c},spawnEntity:function(a,b,c,d){var e="string"==typeof a?ig.global[a]:a;if(!e)throw"Can't spawn entity of type "+a;var f=new e(b,c,d||{});return this.entities.push(f),f.name&&(this.namedEntities[f.name]=f),f},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(a){a.name&&delete this.namedEntities[a.name],a._killed=!0,a.type=ig.Entity.TYPE.NONE,a.checkAgainst=ig.Entity.TYPE.NONE,a.collides=ig.Entity.COLLIDES.NEVER,this._deferredKill.push(a)},run:function(){this.update(),this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null),this.updateEntities(),this.checkEntities();for(var a=0;a<this._deferredKill.length;a++)this._deferredKill[a].erase(),this.entities.erase(this._deferredKill[a]);this._deferredKill=[],(this._doSortEntities||this.autoSort)&&(this.sortEntities(),this._doSortEntities=!1);for(var b in this.backgroundAnims){var c=this.backgroundAnims[b];for(var d in c)c[d].update()}},updateEntities:function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];b._killed||b.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor),this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale,this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var a;for(a=0;a<this.backgroundMaps.length;a++){var b=this.backgroundMaps[a];if(b.foreground)break;b.setScreenPos(this.screen.x,this.screen.y),b.draw()}for(this.drawEntities(),a;a<this.backgroundMaps.length;a++){var b=this.backgroundMaps[a];b.setScreenPos(this.screen.x,this.screen.y),b.draw()}},drawEntities:function(){for(var a=0;a<this.entities.length;a++)this.entities[a].draw()},checkEntities:function(){for(var a={},b=0;b<this.entities.length;b++){var c=this.entities[b];if(c.type!=ig.Entity.TYPE.NONE||c.checkAgainst!=ig.Entity.TYPE.NONE||c.collides!=ig.Entity.COLLIDES.NEVER)for(var d={},e=Math.floor(c.pos.x/this.cellSize),f=Math.floor(c.pos.y/this.cellSize),g=Math.floor((c.pos.x+c.size.x)/this.cellSize)+1,h=Math.floor((c.pos.y+c.size.y)/this.cellSize)+1,i=e;g>i;i++)for(var j=f;h>j;j++)if(a[i])if(a[i][j]){for(var k=a[i][j],l=0;l<k.length;l++)c.touches(k[l])&&!d[k[l].id]&&(d[k[l].id]=!0,ig.Entity.checkPair(c,k[l]));k.push(c)}else a[i][j]=[c];else a[i]={},a[i][j]=[c]}}}),ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex},POS_X:function(a,b){return a.pos.x+a.size.x-(b.pos.x+b.size.x)},POS_Y:function(a,b){return a.pos.y+a.size.y-(b.pos.y+b.size.y)}}}),ig.baked=!0,ig.module("game.menus").requires("impact.font").defines(function(){MenuItem=ig.Class.extend({getText:function(){return"none"},left:function(){},right:function(){},ok:function(){},click:function(){this.ok(),ig.system.canvas.style.cursor="auto"}}),Menu=ig.Class.extend({clearColor:null,name:null,font:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/tungsten-18.png"),fontSelected:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/tungsten-18-orange.png"),fontTitle:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/tungsten-48.png"),current:0,itemClasses:[],items:[],init:function(){this.y=ig.system.height/4+160;for(var a=0;a<this.itemClasses.length;a++)this.items.push(new this.itemClasses[a])},update:function(){ig.input.pressed("up")&&this.current--,ig.input.pressed("down")&&this.current++,this.current=this.current.limit(0,this.items.length-1),ig.input.pressed("left")&&this.items[this.current].left(),ig.input.pressed("right")&&this.items[this.current].right(),ig.input.pressed("ok")&&this.items[this.current].ok();for(var a=this.y,b=ig.system.width/2,c=null,d=0;d<this.items.length;d++){var e=this.items[d],f=this.font.widthForString(e.getText())/2;ig.input.mouse.x>b-f&&ig.input.mouse.x<b+f&&ig.input.mouse.y>a&&ig.input.mouse.y<a+24&&(c=e,this.current=d),a+=30}c?(ig.system.canvas.style.cursor="pointer",ig.input.pressed("click")&&c.click()):ig.system.canvas.style.cursor="auto"},draw:function(){this.clearColor&&(ig.system.context.fillStyle=this.clearColor,ig.system.context.fillRect(0,0,ig.system.width,ig.system.height));var a=ig.system.width/2,b=this.y;this.name&&this.fontTitle.draw(this.name,a,b-160,ig.Font.ALIGN.CENTER);for(var c=0;c<this.items.length;c++){var d=this.items[c].getText();c==this.current?this.fontSelected.draw(d,a,b,ig.Font.ALIGN.CENTER):this.font.draw(d,a,b,ig.Font.ALIGN.CENTER),b+=30}}}),MenuItemSoundVolume=MenuItem.extend({getText:function(){return String.fromCharCode(131)+" < "+(100*ig.soundManager.volume).round()+"% >"},left:function(){ig.soundManager.volume=(ig.soundManager.volume-.1).limit(0,1)},right:function(){ig.soundManager.volume=(ig.soundManager.volume+.1).limit(0,1)},click:function(){ig.input.mouse.x>220?this.right():this.left()}}),MenuItemMusicVolume=MenuItem.extend({getText:function(){return String.fromCharCode(132)+" < "+(100*ig.music.volume).round()+"% >"},left:function(){ig.music.volume=(ig.music.volume-.1).limit(0,1)},right:function(){ig.music.volume=(ig.music.volume+.1).limit(0,1)},click:function(){ig.input.mouse.x>220?this.right():this.left()}}),MenuItemResume=MenuItem.extend({getText:function(){return String.fromCharCode(133)},ok:function(){ig.game.toggleMenu()}}),PauseMenu=Menu.extend({name:String.fromCharCode(141),clearColor:"rgba(0,0,0,0.9)",itemClasses:[MenuItemSoundVolume,MenuItemMusicVolume,MenuItemResume]}),MenuItemNormalMode=MenuItem.extend({getText:function(){return String.fromCharCode(128)},ok:function(){ig.game.difficulty="NORMAL",ig.game.setGame()}}),MenuItemExpertMode=MenuItem.extend({getText:function(){return String.fromCharCode(129)},ok:function(){ig.game.difficulty="EXPERT",ig.game.setGame()}}),MenuItemSoundMenu=MenuItem.extend({getText:function(){return String.fromCharCode(130)},ok:function(){ig.game.toggleMenu()}}),TitleMenu=Menu.extend({itemClasses:[MenuItemNormalMode,MenuItemExpertMode,MenuItemSoundMenu]}),MenuItemBack=MenuItem.extend({getText:function(){return String.fromCharCode(140)},ok:function(){ig.game.setTitle()}}),GameOverMenu=Menu.extend({init:function(){this.parent(),this.y=ig.system.height/4+240},itemClasses:[MenuItemBack]})}),ig.baked=!0,ig.module("game.words").defines(function(){WORDS={2:["am","an","as","at","be","by","cs","do","go","he","if","in","is","it","me","my","no","of","oh","on","or","pi","re","so","to","up","us","we"],3:["act","add","age","ago","aid","aim","air","all","and","any","are","arm","art","ask","ate","bad","ban","bar","bed","bet","bid","big","bit","box","boy","bug","bus","but","buy","can","car","cat","cry","cup","cut","day","did","die","doe","dog","dry","due","eat","end","err","eye","fan","far","fed","few","fit","fix","fly","for","fry","fun","gap","gas","get","got","gun","guy","had","has","hat","her","hid","him","his","hit","hot","how","ice","ill","its","job","joy","key","kid","law","lay","led","leg","let","lie","log","lot","low","mad","man","map","may","men","met","mix","mod","net","new","nor","not","now","odd","off","oil","old","one","our","out","owe","own","pay","pen","per","pop","put","ran","raw","red","rid","row","run","sad","sat","saw","say","see","set","sex","she","sit","six","son","sum","sun","tax","tea","ten","the","tie","tin","too","top","try","two","use","van","via","war","was","way","who","why","win","won","yes","yet","you"],4:["able","acts","adds","ages","aims","also","area","army","asks","away","back","ball","band","bank","bars","base","bear","been","best","bets","bids","bill","bind","bite","bits","blow","blue","boat","body","book","boot","bore","both","bugs","bulk","bury","busy","buys","byte","call","came","card","care","case","cell","cent","char","chip","city","club","clue","code","cold","come","cope","copy","core","cost","cure","cuts","dare","dark","data","date","days","dead","deal","dear","deem","deep","desk","died","dies","disc","disk","does","done","door","down","draw","drew","drop","dumb","dump","duty","each","ease","east","easy","eats","edge","edit","else","ends","even","ever","eyes","face","fact","fail","fair","fall","farm","fast","fate","fear","feed","feel","feet","fell","felt","file","fill","film","find","fine","fire","firm","fish","fits","five","flag","flat","flew","flow","folk","food","foot","form","four","free","from","full","fund","gain","game","gave","gets","girl","give","glad","goes","gone","good","grew","grow","hack","hair","half","hall","hand","hang","hard","harm","hate","have","head","hear","heat","held","hell","help","here","hide","high","hill","hint","hits","hold","hole","home","hope","host","hour","huge","hung","hunt","idea","inch","info","into","item","jobs","join","joke","jump","junk","just","keen","keep","kept","keys","kill","kind","king","knew","know","lack","lady","lain","land","last","late","laws","lazy","lead","leaf","left","legs","lend","less","lets","lied","lies","life","lift","like","line","link","list","live","load","loan","lock","logs","long","look","loop","lose","loss","lost","lots","love","luck","made","mail","main","make","many","mark","mass","mean","meet","mere","mess","mile","mind","mine","miss","mode","more","most","move","much","must","name","near","neck","need","news","next","nice","nine","none","note","numb","obey","odds","omit","once","ones","only","onto","open","ours","over","owed","owes","pack","page","paid","pain","pair","park","part","pass","past","path","pays","peak","pick","pile","pint","pipe","plan","play","plea","plot","plug","plus","poem","poet","poll","pool","poor","port","post","pull","pure","push","puts","putt","quit","race","rain","rare","rate","read","real","rely","rest","ride","rids","ring","rise","risk","road","role","roll","room","root","rule","runs","rush","safe","said","sake","sale","same","save","says","scan","seek","seem","seen","sees","self","sell","send","sent","sets","ship","shop","show","shut","side","sign","site","sits","size","slip","slow","soft","sold","some","soon","sort","spot","stay","step","stop","such","suit","sure","take","talk","tank","tape","task","team","tell","tend","term","test","text","than","that","them","then","they","thin","this","thus","tied","ties","till","time","told","took","town","trap","tree","trip","true","tune","turn","type","ugly","unit","upon","used","user","uses","vary","vast","very","vice","view","vote","wait","walk","wall","want","warm","warn","wash","ways","wear","week","well","went","were","west","what","when","whom","wide","wife","wild","will","wind","wine","wins","wire","wise","wish","with","word","wore","work","worn","year","your","zero"],5:["about","above","abuse","acted","added","admit","adopt","after","again","agree","ahead","aimed","alarm","album","alias","alive","allow","alone","along","alter","among","amuse","angle","angry","annoy","apart","apple","apply","areas","argue","arise","aside","asked","avoid","awake","award","aware","awful","backs","badly","based","bases","basic","basis","bears","began","begin","begun","being","below","binds","bites","black","blame","blank","block","board","books","borne","bound","boxes","brand","break","brief","bring","broke","brown","build","built","bytes","calls","cards","cares","carry","cases","catch","cause","cease","chain","chair","chaos","chars","cheap","child","chips","chose","claim","class","clean","clear","clock","close","coded","codes","comes","costs","could","count","court","cover","crash","crazy","crisp","cross","cycle","daily","dated","dates","datum","deals","dealt","death","deems","delay","depth","digit","dirty","discs","ditto","doing","doors","doubt","dozen","drawn","draws","dream","drink","drive","drops","drove","dying","early","earth","eaten","edits","eight","elect","empty","ended","enemy","enjoy","enter","entry","equal","error","evens","event","every","exact","exist","extra","facts","fails","faith","falls","false","fancy","fatal","fault","feeds","feels","fewer","field","fight","filed","files","fills","final","finds","first","fixed","fixes","flash","flied","flies","float","floor","flown","folks","force","forms","forth","found","frame","fresh","fries","front","fully","funds","funny","gains","games","given","gives","glass","going","goods","grand","grant","graph","grave","great","green","grind","gross","group","grown","grows","guard","guess","guide","habit","hands","handy","hangs","happy","heads","heard","hears","heart","heavy","hello","helps","hence","hides","hints","holds","holes","hoped","hopes","horse","hotel","hours","house","human","hurry","ideal","ideas","image","imply","index","inner","input","issue","items","joins","joint","judge","jumps","keeps","kills","kinds","knock","known","knows","label","lacks","lands","large","lasts","later","leach","leads","learn","least","leave","legal","level","light","liked","likes","limit","lines","links","lists","lived","lives","loads","local","locks","logic","looks","loose","lorry","loses","lower","lucky","lunch","lying","magic","major","makes","march","marks","marry","match","maybe","means","meant","media","meets","merit","messy","metal","might","miles","minds","minor","mixed","mixes","model","money","month","moral","mouth","moved","moves","movie","music","naive","named","names","nasty","needs","never","nicer","night","noise","noisy","north","noted","notes","novel","occur","offer","often","older","omits","opens","order","other","ought","outer","owing","owner","pages","pairs","paper","parts","party","patch","pause","payed","peace","phase","phone","picks","piece","place","plain","plane","plans","plant","plays","plots","point","posts","pound","power","press","price","prime","print","prior","prone","proof","prove","pulls","putts","queue","quick","quiet","quite","quits","quote","radio","raise","range","rapid","rates","reach","react","reads","ready","refer","reply","right","river","rooms","rough","round","route","rules","sadly","safer","saint","sales","saved","saves","scale","scene","score","scrap","seeks","seems","sells","sends","sense","serve","seven","shall","shame","shape","share","sharp","sheet","shelf","shell","shift","shoot","shops","short","shown","shows","shuts","sides","sight","signs","silly","since","sites","sizes","skill","sleep","small","smile","solid","solve","sorry","sorts","sound","south","space","spare","speak","speed","spell","spend","spent","spite","split","spoke","spots","staff","stage","stand","start","state","stays","steal","stick","still","stock","stone","stood","stops","store","stuck","study","stuff","style","sugar","suits","table","taken","takes","talks","tanks","tapes","tasks","taste","teach","teeth","tells","tends","terms","tests","thank","their","there","these","thing","think","third","those","three","threw","throw","tight","timed","times","title","today","token","tooth","topic","total","touch","trace","track","train","traps","trash","treat","trees","trial","trick","tried","tries","truck","truly","trunk","trust","truth","turns","twice","tying","typed","types","under","unite","units","until","upper","upset","usage","users","using","usual","vague","valid","value","video","views","visit","vital","voice","votes","waits","walks","walls","wants","warns","waste","watch","water","wears","weeks","weird","wheel","where","which","while","white","whole","whose","wider","wills","woman","women","words","works","world","worry","worse","worst","worth","would","write","wrong","wrote","years","young","yours"],6:["accept","access","accord","across","acting","action","active","actual","adding","adjust","admits","adopts","advice","advise","affair","affect","afford","afraid","agency","agreed","agrees","aiming","allows","almost","alters","always","amount","amused","amuses","animal","annoys","annual","answer","anyone","anyway","appeal","appear","argued","argues","arises","around","arrive","artist","asking","asleep","aspect","assume","assure","attach","attack","attend","author","autumn","avoids","backed","basing","became","become","before","begins","behalf","behave","behind","belong","better","beyond","bigger","binary","biting","bitten","boards","bodies","borrow","bother","bottle","bottom","bought","branch","breach","breaks","bridge","bright","brings","broken","bucket","budget","buffer","builds","buried","buries","button","buying","called","cannot","caught","caused","causes","chance","change","charge","choice","choose","chosen","church","circle","claims","clears","clever","closed","closer","closes","coding","coffee","column","coming","common","copied","copies","corner","counts","county","couple","course","covers","create","credit","crisis","crisps","cursor","cycles","damage","danger","dating","debate","decade","decent","decide","deduce","deemed","deeply","define","degree","delete","demand","depend","derive","design","desire","detail","detect","device","devote","differ","digits","dinner","direct","divide","dollar","domain","double","dozens","driven","driver","drives","during","easier","easily","eating","edited","editor","effect","effort","either","elects","enable","ending","enough","ensure","enters","entire","entity","eraser","errors","escape","evened","events","except","excess","excuse","exists","expand","expect","expert","extend","extent","factor","failed","fairly","fallen","family","famous","faster","father","faults","fewest","fields","figure","filing","filled","finger","finish","finite","firmly","fiscal","fishes","fitted","fixing","flight","floats","flying","follow","forced","forces","forget","forgot","formal","format","formed","former","fourth","freely","french","friend","future","gained","garden","gather","giving","global","gotten","grands","grants","grinds","ground","groups","growth","habits","handed","handle","hanged","happen","harder","hardly","having","headed","header","health","helped","hereby","hidden","hiding","higher","highly","honest","hoping","horses","ignore","images","impact","impose","inches","income","indeed","inform","inputs","insert","inside","insist","intend","invent","invite","issued","issues","itself","joined","killed","kindly","knocks","labels","lacked","ladies","landed","larger","latest","latter","layout","leaded","leader","learns","leaved","leaves","length","lesser","lesson","letter","levels","liable","lights","likely","liking","limits","linear","linked","listed","listen","little","living","loaded","locked","logged","longer","looked","losing","loudly","lowest","mainly","making","manage","manner","manual","marked","market","master","matter","medium","member","memory","merely","merits","method","middle","minded","minute","misled","missed","misses","misuse","mixing","models","modern","modify","moment","months","mostly","mother","motion","moving","myself","namely","naming","nation","nature","nearby","nearer","nearly","needed","nicest","nobody","normal","notice","notify","noting","number","object","obtain","occupy","occurs","offers","office","oldest","opened","oppose","option","orders","origin","others","output","owners","packet","papers","parent","partly","passed","passes","paying","people","period","permit","person","petrol","phrase","picked","pieces","placed","places","planet","played","please","plenty","pocket","points","police","policy","posted","pounds","powers","prefer","pretty","prices","prints","prompt","proper","proved","proves","public","pulled","purely","pushed","pushes","putted","quoted","quotes","raised","raises","random","rarely","rather","reader","really","reason","recall","recent","record","reduce","refers","refuse","regard","region","regret","reject","relate","remain","remark","remind","remote","remove","repair","repeat","report","resort","result","retain","return","reveal","review","rights","rubber","safely","safest","safety","sample","saving","saying","scheme","school","scores","screen","script","search","season","second","secret","secure","seeing","seemed","select","senior","serial","series","served","server","serves","settle","severe","shared","shares","should","showed","signal","signed","simple","simply","single","skills","slight","slower","slowly","smooth","social","solely","solved","solves","sooner","sorted","sought","sounds","source","spaces","speaks","speech","spells","spends","spirit","splits","spoken","spread","spring","square","stable","stages","stands","starts","stated","states","status","stayed","sticks","stones","stored","stores","stream","street","strict","strike","string","strong","struck","stupid","submit","subset","subtle","sudden","suffer","suited","summer","supply","surely","survey","switch","symbol","syntax","system","tables","taking","talked","target","taught","tested","thanks","theory","things","thinks","though","threat","thrown","throws","ticket","timing","titles","topics","toward","tracks","trains","travel","treats","trusts","trying","turned","twelve","twenty","typing","unable","unique","unless","unlike","update","upsets","useful","values","varied","varies","vastly","vector","virtue","vision","volume","waited","walked","wanted","warned","wasted","wastes","weapon","weight","wheels","whilst","widely","widest","willed","window","winter","wished","wishes","within","wonder","wooden","worded","worked","worker","worthy","writer","writes","yellow"],7:["ability","absence","accepts","accords","account","achieve","acquire","actions","address","adopted","advance","advised","advises","affairs","affects","against","allowed","already","altered","amongst","amounts","amusing","ancient","annoyed","another","answers","anybody","apology","appears","applied","applies","approve","arguing","arrange","arrived","arrives","article","aspects","assumed","assumes","assured","assures","attempt","attends","attract","authors","average","avoided","awkward","backing","balance","battery","bearing","because","becomes","believe","belongs","benefit","besides","betting","between","bidding","biggest","binding","biology","bizarre","borrows","bothers","bracket","briefly","brother","brought","burying","calling","capable","capital","captain","careful","carried","carries","catches","causing","central","century","certain","chances","changed","changes","channel","chapter","charged","charges","cheaper","checked","chooses","circuit","citizen","claimed","clarify","classes","cleared","clearer","clearly","closely","closest","closing","collect","college","combine","command","comment","company","compare","complex","compose","compute","concept","concern","confirm","confuse","connect","consist","contact","contain","content","context","control","convert","copying","corners","correct","corrupt","costing","council","counted","counter","country","courses","covered","crashed","crashes","created","creates","culture","cumming","curious","current","cutting","damaged","damages","dealing","decided","decides","declare","deeming","default","defined","defines","degrees","deleted","deletes","deliver","demands","depends","derived","derives","designs","desired","desires","despite","destroy","details","detects","develop","devices","devoted","devotes","digital","directs","discuss","dislike","display","distant","disturb","divided","divides","drastic","drawing","drivers","driving","dropped","dubious","earlier","easiest","economy","editing","edition","editors","effects","efforts","elected","element","enables","ensured","ensures","entered","entitle","entries","equally","evening","exactly","examine","example","exclude","execute","existed","expands","expects","expense","experts","explain","express","extends","extract","extreme","factors","failing","failure","falling","farther","fashion","fastest","feature","federal","feeding","feeling","figures","filling","finally","finding","fingers","firstly","fitting","flashed","flashes","floated","follows","forcing","foreign","forever","forgets","forming","fortune","forward","freedom","friends","further","gaining","garbage","general","genuine","getting","granted","graphic","greater","greatly","grosses","grounds","growing","guessed","guesses","handing","handled","handles","hanging","happens","happily","hardest","harmful","heading","healthy","hearing","heavily","helpful","helping","herself","highest","himself","history","hitting","holding","holiday","however","hundred","husband","ignored","ignores","illegal","imagine","implied","implies","imposed","imposes","improve","incline","include","informs","initial","inserts","insists","install","instant","instead","integer","intends","invalid","invents","invited","invites","involve","isolate","issuing","joining","justify","keeping","killing","knocked","knowing","lacking","landing","largely","largest","leading","leaving","lecture","legally","lessons","letters","letting","library","limited","linking","listing","loading","locking","logging","logical","longest","looking","machine","managed","manager","manages","manuals","marking","massive","matches","matters","maximum","meaning","measure","medical","mediums","meeting","members","mention","message","methods","million","minding","minimal","minimum","minutes","mislead","missing","mistake","mistook","monitor","morning","natural","naughty","nearest","needing","neither","nervous","network","nothing","noticed","notices","nowhere","numbers","numbest","objects","obscure","observe","obtains","obvious","offered","officer","offices","omitted","opening","operate","opinion","opposed","opposes","options","ordered","outside","overall","package","painful","partial","parties","passing","patient","pattern","perfect","perform","perhaps","permits","persons","phrases","picking","picture","placing","planned","plastic","playing","pleased","pleases","pointed","popular","posting","precise","prefers","prepare","present","pressed","presses","presume","prevent","primary","printed","printer","private","problem","process","produce","product","project","promise","propose","protect","protest","provide","proving","publish","pulling","purpose","pushing","putting","qualify","quality","quarter","quicker","quickly","quietly","quoting","raising","rapidly","reached","reaches","readers","readily","reading","reality","reasons","receive","records","recover","reduced","reduces","reflect","refused","refuses","regards","regular","rejects","related","relates","release","remains","remarks","reminds","removal","removed","removes","repeats","replace","replied","replies","reports","request","require","reserve","respect","respond","restart","restore","results","returns","reveals","reverse","rewrite","ridding","roughly","routine","rubbish","running","satisfy","schools","science","scratch","screens","seconds","section","seeking","seeming","selects","selling","seminar","sending","serious","service","serving","session","setting","settled","settles","several","sharing","shopped","shorter","shortly","showing","signals","signing","similar","simpler","sitting","slowest","smaller","society","solving","somehow","someone","soonest","sorting","sounded","sources","speaker","special","specify","spotted","spreads","started","stating","station","staying","stopped","storage","storing","strange","strikes","strings","student","studied","studies","subject","submits","succeed","success","suffers","suffice","suggest","suiting","summary","support","suppose","surface","survive","suspect","suspend","symbols","systems","talking","teacher","teaches","tedious","telling","testing","thereby","thought","through","tickets","tonight","totally","touched","touches","towards","traffic","trained","trapped","treated","trivial","trouble","trusted","turning","typical","unaware","unclear","unhappy","uniform","unknown","unusual","updated","updates","upwards","useless","usually","utility","utterly","vaguely","variety","various","varying","version","visible","waiting","walking","wanting","warning","wasting","watched","watches","wearing","weather","weekend","welcome","western","whereas","whereby","whether","whoever","willing","windows","winning","wishing","without","wonders","wording","workers","working","worried","worries","writing","written"],8:["absolute","academic","accepted","accident","accorded","accounts","accuracy","accurate","achieved","achieves","acquired","acquires","activity","actually","addition","adequate","admitted","adopting","advanced","advances","advising","affected","agreeing","allowing","altering","although","analogue","analysis","announce","annoying","answered","anyplace","anything","anywhere","apparent","appeared","applying","approach","approval","approved","approves","argument","arranged","arranges","arriving","articles","assembly","assuming","assuring","attached","attaches","attempts","attended","attitude","audience","avoiding","becoming","believed","believes","benefits","borrowed","bothered","brackets","branches","breaking","bringing","building","bulletin","business","campaign","capacity","carrying","cassette","catching","category","chairman","chaiwubi","changing","channels","charging","cheapest","checking","chemical","children","choosing","claiming","clearest","clearing","collapse","collects","colleges","combined","combines","commands","comments","commonly","compared","compares","compiler","complain","complete","composed","composes","computed","computer","computes","concerns","concrete","confirms","confused","confuses","connects","consider","consists","constant","contains","contents","continue","contract","contrary","contrast","controls","convince","corrects","corrupts","counting","covering","crashing","creating","creation","creature","critical","customer","damaging","database","deciding","decision","declared","declares","decrease","dedicate","defining","definite","deleting","delivers","delivery","depended","deriving","describe","designed","desiring","destroys","detailed","detected","develops","devoting","directed","directly","director","disagree","disaster","discount","discover","displays","distance","distinct","district","disturbs","dividing","division","document","doubtful","dropping","earliest","economic","electing","election","electric","elements","elevator","emphasis","employee","engineer","enormous","ensuring","entering","entirely","entitled","entitles","entrance","estimate","evenings","everyone","evidence","examined","examines","examples","exchange","excluded","excludes","executed","executes","exercise","existing","expanded","expected","explains","explicit","extended","external","facility","familiar","farthest","feasible","features","feedback","finished","finishes","flashing","flexible","floating","followed","fraction","frequent","friendly","function","furthest","gasoline","generate","governor","graduate","granting","graphics","grateful","greatest","grinding","guessing","handling","happened","hardware","harmless","holidays","horrible","hospital","hundreds","identify","identity","ignoring","implying","imposing","improved","improves","incident","inclined","inclines","included","includes","increase","indicate","industry","inferior","infinite","informed","initials","innocent","inputted","inserted","insisted","installs","instance","integers","integral","intended","interact","interest","internal","interval","invented","inviting","involved","involves","irritate","isolated","isolates","keyboard","knocking","language","learning","lectures","lifetime","likewise","limiting","location","machines","magnetic","maintain","majority","managing","marriage","material","meanings","measured","measures","mechanic","meetings","mentions","messages","midnight","military","millions","minority","misleads","mistaken","mistakes","modified","modifies","mornings","movement","multiple","national","negative","networks","nonsense","normally","noticing","nowadays","numerous","objected","observed","observes","obtained","occasion","occupied","occupies","occurred","offering","official","omitting","operated","operates","operator","opinions","opposing","opposite","optional","ordering","ordinary","original","packages","parallel","patterns","peculiar","performs","personal","persuade","physical","pictures","planning","pleasant","pleasing","pointing","policies","position","positive","possible","possibly","powerful","prepared","prepares","presence","presents","preserve","pressing","pressure","prevents","previous","printers","printing","printout","probably","problems","produced","produces","products","progress","projects","promised","promises","promptly","properly","property","proposal","proposed","proposes","prospect","protects","provided","provides","publicly","puncture","purchase","purposes","quantity","question","quickest","quitting","randomly","reaching","reaction","readable","received","receives","recently","recorded","recovers","reducing","referred","reflects","refusing","regarded","register","rejected","relating","relation","relative","released","releases","relevant","reliable","religion","remained","remember","reminded","remotely","removing","repeated","replaced","replaces","replying","reported","requests","required","requires","research","reserved","reserves","resident","resource","respects","response","restored","restores","restrict","resulted","returned","revealed","sciences","searched","searches","secondly","sections","security","selected","sensible","sensibly","sentence","separate","sequence","services","sessions","settling","severely","shopping","shortage","shortest","shutting","simplest","slightly","smallest","software","solution","somebody","sometime","somewhat","sounding","southern","speakers","speaking","specific","spelling","spending","spotting","standard","standing","starting","stations","sticking","stopping","straight","strategy","strength","strictly","striking","strongly","students","studying","subjects","suddenly","suffered","suggests","suitable","suitably","superior","supplied","supplies","supports","supposed","supposes","surprise","survived","survives","suspects","suspends","switched","switches","teaching","tendency","terminal","terribly","thinking","thoughts","thousand","throwing","together","tomorrow","touching","training","transfer","trapping","treating","trusting","ultimate","unlikely","unwanted","updating","vacation","validity","valuable","variable","versions","watching","welcomed","welcomes","whatever","whenever","wherever","withdraw","wondered","worrying","yourself"],9:["abilities","accepting","according","achieving","acquiring","addressed","addresses","admitting","advancing","advantage","advertise","affecting","afternoon","agreement","algorithm","alternate","ambiguous","anonymous","answering","apologies","appearing","approving","arbitrary","arguments","arranging","assembler","assistant","associate","attaching","attempted","attending","attention","authority","automatic","available","backwards","basically","beautiful","beginning","believing","borrowing","bothering","broadcast","buildings","calculate","candidate","cardboard","carefully","certainly","character","collected","combining","commented","committee","community","comparing","complains","complaint","completed","completes","component","composing","computers","computing","concerned","condition","confident","confirmed","confusing","confusion","connected","considers","construct","contained","continued","continues","convinced","convinces","corrected","correctly","corrupted","criticism","currently","dangerous","decisions","declaring","dedicated","dedicates","delivered","depending","described","describes","designing","desirable","desperate","destroyed","detailing","detecting","determine","developed","different","difficult","directing","direction","directory","disappear","discovers","discussed","discusses","displayed","disturbed","documents","education","effective","efficient","elsewhere","embarrass","emergency","encounter","encourage","engineers","entitling","equipment","essential","establish","everybody","examining","excellent","exception","excessive","excluding","exclusive","executing","existence","expanding","expansion","expecting","expensive","explained","expressed","expresses","extending","extension","extensive","extremely","financial","finishing","following","forgotten","functions","generally","generated","generates","gradually","guarantee","happening","hopefully","identical","immediate","implement","important","improving","inability","inclining","including","incorrect","increased","increases","indicates","influence","informing","initially","inputting","inserting","insisting","installed","instantly","insurance","intending","intention","interests","interface","interpret","intervals","introduce","inventing","invisible","involving","irritated","irritates","isolating","justified","justifies","knowledge","languages","libraries","literally","locations","magnitude","maintains","materials","measuring","mechanics","mechanism","mentioned","mistaking","modifying","movements","naturally","necessary","necessity","numerical","objecting","objection","observing","obtaining","obviously","occasions","occupying","occurring","operating","operation","operators","otherwise","ourselves","paragraph","partially","perfectly","performed","permanent","permitted","persuaded","persuades","pointless","political","positions","potential","practical","precisely","preferred","preparing","presented","president","prevented","primitive","principle","procedure","processed","processes","processor","producing","promising","proposing","protected","providing","publicity","published","publishes","qualified","qualifies","questions","receiving","reception","recommend","recording","recovered","reduction","redundant","reference","referring","reflected","regarding","registers","regularly","rejecting","releasing","relevance","religious","reluctant","remaining","remembers","reminding","repeating","replacing","reporting","represent","reproduce","requested","requiring","reserving","resourced","resources","responses","restoring","restricts","resulting","returning","revealing","satisfied","satisfies","searching","secondary","secretary","selecting","selection","sensitive","sentences","sequences","seriously","similarly","sincerely","situation","solutions","someplace","something","sometimes","somewhere","specially","specified","specifies","splitting","spreading","standards","statement","statistic","structure","submitted","suffering","suggested","supplying","supported","supposing","surprised","surprises","surviving","suspected","suspended","suspicion","switching","technical","technique","telephone","temporary","terminals","therefore","thousands","transfers","translate","transport","treatment","uncertain","universal","unlimited","upsetting","vacations","variables","variation","virtually","welcoming","wonderful","wondering","yesterday"],10:["absolutely","acceptable","accessible","accidental","activities","additional","addressing","admittedly","advantages","advertised","advertises","algorithms","altogether","apparently","appearance","appreciate","arithmetic","artificial","associated","associates","assumption","atmosphere","attempting","attractive","automobile","background","beforehand","broadcasts","categories","characters","collecting","collection","commenting","commercial","commission","commitment","comparable","comparison","compatible","complained","complaints","completely","completing","complexity","complicate","components","compromise","compulsory","concerning","conclusion","conditions","conference","confirming","connecting","connection","considered","consistent","constraint","containing","continuing","continuous","contribute","controlled","convenient","convention","convincing","correcting","correction","corrupting","dedicating","definitely","definition","definitive","deliberate","delivering","democratic","department","describing","destroying","determined","determines","developing","dictionary","difference","difficulty","directions","disappears","discipline","discourage","discovered","discussing","discussion","displaying","distinctly","distribute","disturbing","documented","electronic","encounters","encouraged","encourages","engineered","equivalent","especially","eventually","everything","everywhere","exceptions","experience","experiment","explaining","expressing","expression","facilities","forgetting","frequently","generating","generation","government","guaranteed","guarantees","historical","implements","importance","impossible","impression","inadequate","incomplete","increasing","indication","individual","industrial","inevitably","installing","interested","interprets","introduced","introduces","invariably","invitation","irrelevant","irritating","justifying","laboratory","literature","maintained","meaningful","membership","mentioning","misleading","mysterious","objections","occasional","operations","opposition","originally","particular","performing","permission","permitting","personally","persuading","phenomenon","philosophy","population","postmaster","preferable","preferably","preference","preferring","presenting","presumably","preventing","previously","principles","processing","processors","production","programmer","properties","proportion","protecting","protection","publishing","qualifying","quantities","reasonable","reasonably","recommends","recovering","references","reflecting","reflection","regardless","registered","regulation","relatively","remembered","repeatedly","represents","requesting","resolution","resourcing","restricted","ridiculous","satisfying","scientific","separately","situations","specifying","statements","statistics","structures","submitting","subsequent","substitute","successful","sufficient","suggesting","suggestion","supervisor","supporting","supposedly","surprising","suspecting","suspending","techniques","technology","television","themselves","thoroughly","throughout","translated","translates","ultimately","underneath","understand","understood","university","unpleasant","unsuitable","whatsoever","widespread","worthwhile"],11:["accordingly","advertising","alternative","application","appreciated","appreciates","appropriate","arrangement","associating","association","authorities","calculation","chaiwubicom","circulation","combination","communicate","competition","complaining","complicated","complicates","composition","connections","consequence","considering","consistency","constraints","consumption","continually","controlling","conventions","definitions","demonstrate","description","determining","development","differences","differently","disappeared","discouraged","discourages","discovering","discussions","distinction","distinguish","distributed","distributes","documenting","educational","effectively","electronics","embarrassed","embarrasses","encountered","encouraging","engineering","environment","essentially","established","establishes","experienced","experiences","experiments","explanation","forthcoming","fortunately","fundamental","imagination","immediately","implemented","implication","importantly","improvement","independent","individuals","information","institution","instruction","intelligent","interesting","interpreted","introducing","investigate","maintaining","mathematics","meaningless","necessarily","observation","opportunity","performance","permanently","possibility","potentially","practically","preparation","programmers","publication","punctuation","recognition","recommended","registering","regulations","remembering","replacement","represented","requirement","responsible","restricting","significant","statistical","substantial","suggestions","temperature","temporarily","terminology","theoretical","traditional","transferred","translating","translation","understands","unfortunate","unnecessary"],12:["accidentally","alternatives","announcement","applications","appreciating","arrangements","broadcasting","calculations","circumstance","combinations","complicating","consequences","consequently","considerable","considerably","continuation","continuously","contribution","conventional","conversation","deliberately","descriptions","difficulties","disadvantage","disappearing","discouraging","distributing","distribution","embarrassing","encountering","establishing","experiencing","experimental","guaranteeing","implementing","implications","improvements","incidentally","incompatible","inconsistent","individually","institutions","instructions","intelligence","interpreting","intervention","introduction","manipulation","mathematical","nevertheless","occasionally","particularly","professional","recommending","relationship","representing","requirements","respectively","significance","simultaneous","sophisticate","specifically","successfully","sufficiently","transferring","unacceptable","universities","unreasonable"]}
}),ig.baked=!0,ig.module("game.entities.particle").requires("impact.entity").defines(function(){EntityParticle=ig.Entity.extend({size:{x:4,y:4},offset:{x:0,y:0},maxVel:{x:160,y:160},minBounceVelocity:0,type:ig.Entity.TYPE.NONE,checkAgainst:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.LITE,lifetime:5,fadetime:1,bounciness:.6,friction:{x:20,y:0},init:function(a,b,c){this.parent(a,b,c),this.vel.x=(2*Math.random()-1)*this.vel.x,this.vel.y=(2*Math.random()-1)*this.vel.y,this.currentAnim.flip.x=Math.random()>.5,this.currentAnim.flip.y=Math.random()>.5,this.currentAnim.gotoRandomFrame(),this.idleTimer=new ig.Timer},update:function(){return this.idleTimer.delta()>this.lifetime?(this.kill(),void 0):(this.currentAnim.alpha=this.idleTimer.delta().map(this.lifetime-this.fadetime,this.lifetime,1,0),this.parent(),void 0)}})}),ig.baked=!0,ig.module("game.entities.enemy").requires("impact.entity","impact.font","game.words","game.entities.particle").defines(function(){EntityEnemy=ig.Entity.extend({word:"none",remainingWord:"none",health:8,currentLetter:0,targeted:!1,font:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/deja-vu-12.png"),fontActive:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/deja-vu-12-orange.png"),speed:10,friction:{x:100,y:100},hitTimer:null,dead:!1,angle:0,wordLength:{min:8,max:8},soundHit:new ig.Sound("http://www.chaiwubi.com/static/z-type/media/sounds/hit.ogg"),type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,init:function(a,b,c){this.parent(a,b,c),this.health=Math.random().map(0,1,this.wordLength.min,this.wordLength.max).round(),this.word=this.getWordWithLength(this.health),this.remainingWord=this.word,this.hitTimer=new ig.Timer(0),this.dieTimer=new ig.Timer(0),ig.game.registerTarget(this.word.charAt(0),this),this.angle=this.angleTo(ig.game.player)},getWordWithLength:function(a){for(var b="wtf",c=0;20>c;c++)if(b=a>=2&&12>=a?WORDS[a].random():String.fromCharCode("a".charCodeAt(0)+(26*Math.random()).floor()),!ig.game.targets[b.charAt(0)].length)return b;return b},target:function(){this.targeted=!0,ig.game.currentTarget=this,ig.game.unregisterTarget(this.word.charAt(0),this),ig.game.entities.erase(this),ig.game.entities.push(this)},draw:function(){ig.system.context.globalCompositeOperation="lighter",this.parent(),ig.system.context.globalCompositeOperation="source-over"},drawLabel:function(){if(this.remainingWord.length){var a=this.font.widthForString(this.word),b=(this.pos.x-6).limit(a+2,ig.system.width-1),c=(this.pos.y+this.size.y-10).limit(2,ig.system.height-19),d=ig.system.getDrawPos(b-a-2),e=ig.system.getDrawPos(c-3);ig.system.context.fillStyle="rgba(0,0,0,0.5)",ig.system.context.fillRect(d,e,a+3,19),this.targeted?this.fontActive.draw(this.remainingWord,b,c,ig.Font.ALIGN.RIGHT):this.font.draw(this.remainingWord,b,c,ig.Font.ALIGN.RIGHT)}},kill:function(){ig.game.unregisterTarget(this.word.charAt(0),this),ig.game.currentTarget==this&&(ig.game.currentTarget=null),this.parent()},update:function(){this.hitTimer.delta()>0&&(this.vel.x=Math.cos(this.angle)*this.speed,this.vel.y=Math.sin(this.angle)*this.speed),this.parent(),(this.pos.x<-this.animSheet.width||this.pos.x>ig.system.width+10||this.pos.y>ig.system.height+10||this.pos.y<-this.animSheet.height-30)&&this.kill()},hit:function(){for(var a=this.health<=1?10:4,b=0;a>b;b++)ig.game.spawnEntity(EntityExplosionParticle,this.pos.x,this.pos.y);this.vel.x=20*-Math.cos(this.angle),this.vel.y=20*-Math.sin(this.angle),this.hitTimer.set(.3),this.receiveDamage(1),ig.game.lastKillTimer.set(.3),this.soundHit.play()},isHitBy:function(a){return this.remainingWord.charAt(0)==a?(this.remainingWord=this.remainingWord.substr(1),0==this.remainingWord.length&&(ig.game.currentTarget=null,ig.game.unregisterTarget(this.word.charAt(0),this),this.dead=!0),!0):!1},check:function(a){a.kill(),this.kill()}}),EntityExplosionParticle=EntityParticle.extend({lifetime:.5,fadetime:.5,vel:{x:60,y:60},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/explosion.png",32,32),init:function(a,b,c){this.addAnim("idle",5,[0,1,2]),this.parent(a,b,c)},draw:function(){ig.system.context.globalCompositeOperation="lighter",this.parent(),ig.system.context.globalCompositeOperation="source-over"},update:function(){this.currentAnim.angle+=.1*ig.system.tick,this.parent()}})}),ig.baked=!0,ig.module("game.entities.enemy-missle").requires("game.entities.enemy").defines(function(){EntityEnemyMissle=EntityEnemy.extend({size:{x:8,y:15},offset:{x:6,y:7},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/missle.png",20,26),health:4,speed:35,targetTimer:null,wordLength:{min:2,max:5},init:function(a,b,c){this.parent(a,b,c),this.addAnim("idle",1,[0]),this.angle=c.angle,this.currentAnim.angle=this.angle-Math.PI/2,this.targetTimer=new ig.Timer(1)},update:function(){var a=this.targetTimer.delta();if(a>0&&.7>a){var b=this.angle-this.angleTo(ig.game.player);this.angle-=2*b*ig.system.tick,this.currentAnim.angle=this.angle-Math.PI/2}this.parent()}})}),ig.baked=!0,ig.module("game.entities.enemy-mine").requires("game.entities.enemy").defines(function(){EntityEnemyMine=EntityEnemy.extend({size:{x:12,y:12},offset:{x:10,y:10},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/mine.png",32,32),speed:30,health:6,wordLength:{min:3,max:6},init:function(a,b,c){this.parent(a,b,c),this.addAnim("idle",1,[0])},update:function(){this.angle=this.angleTo(ig.game.player),this.parent(),this.currentAnim.angle+=2*ig.system.tick}})}),ig.baked=!0,ig.module("game.entities.enemy-destroyer").requires("game.entities.enemy").defines(function(){EntityEnemyDestroyer=EntityEnemy.extend({size:{x:24,y:34},offset:{x:10,y:8},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/destroyer.png",43,58),health:8,speed:20,shootTimer:null,wordLength:{min:7,max:10},init:function(a,b,c){this.parent(a,b,c),this.addAnim("idle",1,[0]),this.shootTimer=new ig.Timer(5),this.angle=(Math.random().map(0,1,67,90)+(this.pos.x>ig.system.width/2?22.5:0))*Math.PI/180,this.currentAnim.angle=this.angle-Math.PI/2},update:function(){this.parent(),this.shootTimer.delta()>0&&(this.shootTimer.reset(),ig.game.spawnEntity(EntityEnemyMissle,this.pos.x+12,this.pos.y+22,{angle:this.angle}))}})}),ig.baked=!0,ig.module("game.entities.enemy-oppressor").requires("game.entities.enemy").defines(function(){EntityEnemyOppressor=EntityEnemy.extend({size:{x:36,y:58},offset:{x:16,y:10},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/oppressor.png",68,88),health:10,speed:15,shootTimer:null,bullets:16,wordLength:{min:9,max:12},init:function(a,b,c){this.parent(a,b-18,c),this.addAnim("idle",1,[0]),this.shootTimer=new ig.Timer(7),this.angle=Math.PI/2},update:function(){if(this.parent(),this.shootTimer.delta()>0){for(var a=140/(this.bullets-1),b=20,c=21,d=0;d<this.bullets;d++){var e=b*Math.PI/180,f=this.pos.x+18+Math.cos(e)*c,g=this.pos.y+48+Math.sin(e)*c;ig.game.spawnEntity(EntityEnemyBullet,f,g,{angle:e}),b+=a}this.shootTimer.reset()}}}),EntityEnemyBullet=EntityEnemy.extend({size:{x:2,y:2},offset:{x:8,y:11},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/bullet.png",20,24),health:1,speed:50,wordLength:{min:1,max:1},init:function(a,b,c){this.parent(a,b,c),this.addAnim("idle",1,[0]),this.angle=c.angle,this.currentAnim.angle=this.angle-Math.PI/2}})}),ig.baked=!0,ig.module("game.entities.player").requires("impact.entity","game.entities.particle").defines(function(){EntityPlayer=ig.Entity.extend({animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/ship.png",24,24),targetAngle:0,size:{x:8,y:8},offset:{x:8,y:8},angle:0,targetAngle:0,soundShoot:new ig.Sound("http://www.chaiwubi.com/static/z-type/media/sounds/plasma.ogg"),soundMiss:new ig.Sound("http://www.chaiwubi.com/static/z-type/media/sounds/click.ogg"),soundExplode:new ig.Sound("http://www.chaiwubi.com/static/z-type/media/sounds/explosion.ogg"),type:ig.Entity.TYPE.A,init:function(a,b,c){this.parent(a,b,c),this.addAnim("idle",60,[0]),this.addAnim("shoot",.05,[3,2,1,0],!0),this.addAnim("miss",.05,[4,5,6],!0)},draw:function(){ig.system.context.globalCompositeOperation="lighter",this.parent(),ig.system.context.globalCompositeOperation="source-over"},update:function(){this.currentAnim.loopCount>0&&(this.currentAnim=this.anims.idle);var a=this.angle-this.targetAngle;Math.abs(a)<.02?this.angle=this.targetAngle:this.angle-=10*a*ig.system.tick,this.currentAnim.angle=this.angle,this.parent()},kill:function(){ig.game.setGameOver(),this.soundExplode.play();for(var a=0;50>a;a++)ig.game.spawnEntity(EntityExplosionParticleFast,this.pos.x,this.pos.y);this.pos.y=ig.system.height+300,this.parent()},shoot:function(a){this.currentAnim=this.anims.shoot.rewind();var b=ig.game.spawnEntity(EntityPlasma,this.pos.x+6,this.pos.y+4);b.target=a;var c=this.angleTo(a);this.targetAngle=c+Math.PI/2,this.soundShoot.play()},miss:function(){this.currentAnim=this.anims.miss.rewind(),this.soundMiss.play()}}),EntityPlasma=ig.Entity.extend({speed:800,maxVel:{x:1e3,y:1e3},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/plasma.png",96,96),size:{x:4,y:4},offset:{x:46,y:46},distance:1e5,init:function(a,b,c){this.parent(a,b,c),this.addAnim("idle",1,[0])},draw:function(){ig.system.context.globalCompositeOperation="lighter",this.parent(),ig.system.context.globalCompositeOperation="source-over"},update:function(){if(this.target){var a=this.distanceTo(this.target);if(a>this.distance||a<this.target.size.y)return this.target.hit(),this.kill(),void 0;var b=this.angleTo(this.target);this.currentAnim.angle=b+Math.PI/2,this.vel.x=Math.cos(b)*this.speed,this.vel.y=Math.sin(b)*this.speed,this.distance=a,this.parent()}else this.kill()}}),EntityExplosionParticleFast=EntityParticle.extend({lifetime:2,fadetime:2,maxVel:{x:1e3,y:1e3},vel:{x:100,y:100},animSheet:new ig.AnimationSheet("http://www.chaiwubi.com/static/z-type/media/sprites/explosion.png",32,32),init:function(a,b,c){this.addAnim("idle",5,[0,1,2]),this.parent(a,b,c)},draw:function(){ig.system.context.globalCompositeOperation="lighter",this.parent(),ig.system.context.globalCompositeOperation="source-over"},update:function(){this.currentAnim.angle+=.1*ig.system.tick,this.parent()}})}),ig.baked=!0,ig.module("plugins.impact-splash-loader").requires("impact.loader").defines(function(){ig.ImpactSplashLoader=ig.Loader.extend({endTimer:0,fadeToWhiteTime:200,fadeToGameTime:800,end:function(){this.parent(),this.endTime=Date.now(),ig.system.setDelegate(this)},run:function(){var a=Date.now()-this.endTime,b=1;if(a<this.fadeToWhiteTime)this.draw(),b=a.map(0,this.fadeToWhiteTime,0,1);else{if(!(a<this.fadeToGameTime))return ig.system.setDelegate(ig.game),void 0;ig.game.run(),b=a.map(this.fadeToWhiteTime,this.fadeToGameTime,1,0)}ig.system.context.fillStyle="rgba(255,255,255,"+b+")",ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.realHeight)},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var a=ig.system.context,b=ig.system.realWidth,c=ig.system.realHeight,d=b/340/3,e=(b-340*d)/2;a.fillStyle="rgba(0,0,0,0.8)",a.fillRect(0,0,b,c),a.fillStyle="#888",a.textAlign="right",a.font="10px Arial",a.fillText("http://impactjs.com",b-10,c-10),a.textAlign="left",a.save(),a.translate(e,c/2.5),a.scale(d,d),a.lineWidth="3",a.strokeStyle="#666666",a.strokeRect(25,160,300,20),a.fillStyle="#ffffff",a.fillRect(30,165,290*this._drawStatus,10),this.drawPaths("rgb(255,255,255)",ig.ImpactSplashLoader.PATHS_IMPACT);var f=ig.ImpactSplashLoader.PATHS_COMET;f[5][0]=3-7*Math.random()*this._drawStatus,f[5][1]=3-10*Math.random()*this._drawStatus,f[7][0]=29.5-10*Math.random()*this._drawStatus,f[7][1]=40.4-10*Math.random()*this._drawStatus,f[9][0]=16.1-10*Math.random()*this._drawStatus,f[9][1]=36.1-5*Math.random()*this._drawStatus,a.translate(7*-Math.random()*this._drawStatus,5*-Math.random()*this._drawStatus),this.drawPaths("rgb(243,120,31)",f),a.restore()},drawPaths:function(a,b){var c=ig.system.context;c.fillStyle=a;for(var d=0;d<b.length;d+=2)c[ig.ImpactSplashLoader.OPS[b[d]]].apply(c,b[d+1])}}),ig.ImpactSplashLoader.OPS={bp:"beginPath",cp:"closePath",f:"fill",m:"moveTo",l:"lineTo",bc:"bezierCurveTo"},ig.ImpactSplashLoader.PATHS_COMET=["bp",[],"m",[85.1,58.3],"l",[0,0],"l",[29.5,40.4],"l",[16.1,36.1],"l",[54.6,91.6],"bc",[65.2,106.1,83.4,106.7,93.8,95.7],"bc",[103.9,84.9,98.6,67.6,85.1,58.3],"cp",[],"m",[76,94.3],"bc",[68.5,94.3,62.5,88.2,62.5,80.8],"bc",[62.5,73.3,68.5,67.2,76,67.2],"bc",[83.5,67.2,89.6,73.3,89.6,80.8],"bc",[89.6,88.2,83.5,94.3,76,94.3],"cp",[],"f",[]],ig.ImpactSplashLoader.PATHS_IMPACT=["bp",[],"m",[128.8,98.7],"l",[114.3,98.7],"l",[114.3,26.3],"l",[128.8,26.3],"l",[128.8,98.7],"cp",[],"f",[],"bp",[],"m",[159.2,70.1],"l",[163.6,26.3],"l",[184.6,26.3],"l",[184.6,98.7],"l",[170.3,98.7],"l",[170.3,51.2],"l",[164.8,98.7],"l",[151.2,98.7],"l",[145.7,50.7],"l",[145.7,98.7],"l",[134.1,98.7],"l",[134.1,26.3],"l",[155,26.3],"l",[159.2,70.1],"cp",[],"f",[],"bp",[],"m",[204.3,98.7],"l",[189.8,98.7],"l",[189.8,26.3],"l",[211,26.3],"bc",[220,26.3,224.5,30.7,224.5,39.7],"l",[224.5,60.1],"bc",[224.5,69.1,220,73.6,211,73.6],"l",[204.3,73.6],"l",[204.3,98.7],"cp",[],"m",[207.4,38.7],"l",[204.3,38.7],"l",[204.3,61.2],"l",[207.4,61.2],"bc",[209.1,61.2,210,60.3,210,58.6],"l",[210,41.3],"bc",[210,39.5,209.1,38.7,207.4,38.7],"cp",[],"f",[],"bp",[],"m",[262.7,98.7],"l",[248.3,98.7],"l",[247.1,88.2],"l",[238,88.2],"l",[237,98.7],"l",[223.8,98.7],"l",[233.4,26.3],"l",[253.1,26.3],"l",[262.7,98.7],"cp",[],"m",[239.4,75.5],"l",[245.9,75.5],"l",[242.6,43.9],"l",[239.4,75.5],"cp",[],"f",[],"bp",[],"m",[300.9,66.7],"l",[300.9,85.9],"bc",[300.9,94.9,296.4,99.4,287.4,99.4],"l",[278.5,99.4],"bc",[269.5,99.4,265.1,94.9,265.1,85.9],"l",[265.1,39.1],"bc",[265.1,30.1,269.5,25.6,278.5,25.6],"l",[287.2,25.6],"bc",[296.2,25.6,300.7,30.1,300.7,39.1],"l",[300.7,56.1],"l",[286.4,56.1],"l",[286.4,40.7],"bc",[286.4,38.9,285.6,38.1,283.8,38.1],"l",[282.1,38.1],"bc",[280.4,38.1,279.5,38.9,279.5,40.7],"l",[279.5,84.3],"bc",[279.5,86.1,280.4,86.9,282.1,86.9],"l",[284,86.9],"bc",[285.8,86.9,286.6,86.1,286.6,84.3],"l",[286.6,66.7],"l",[300.9,66.7],"cp",[],"f",[],"bp",[],"m",[312.5,98.7],"l",[312.5,39.2],"l",[303.7,39.2],"l",[303.7,26.3],"l",[335.8,26.3],"l",[335.8,39.2],"l",[327,39.2],"l",[327,98.7],"l",[312.5,98.7],"cp",[],"f",[]]}),ig.baked=!0,ig.module("game.main").requires("impact.game","impact.font","game.menus","game.entities.enemy-missle","game.entities.enemy-mine","game.entities.enemy-destroyer","game.entities.enemy-oppressor","game.entities.player","plugins.impact-splash-loader").defines(function(){Number.zeroes="000000000000",Number.prototype.zeroFill=function(a){var b=this.toString();return Number.zeroes.substr(0,a-b.length)+b},ZType=ig.Game.extend({font:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/tungsten-18.png"),fontScore:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/04b03-mono-digits.png"),fontTitle:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/tungsten-48.png"),fontSelected:new ig.Font("http://www.chaiwubi.com/static/z-type/media/fonts/tungsten-18-orange.png"),spawnTimer:null,targets:{},currentTarget:null,yScroll:0,backdrop:new ig.Image("http://www.chaiwubi.com/static/z-type/media/background/backdrop.png"),grid:new ig.Image("http://www.chaiwubi.com/static/z-type/media/background/grid.png"),music:new ig.Sound("http://www.chaiwubi.com/static/z-type/media/music/endure.ogg",!1),menu:null,mode:0,score:0,streak:0,hits:0,misses:0,multiplier:1,wave:{},gameTime:0,kills:0,difficulty:"NORMAL",init:function(){var a=new ig.BackgroundMap(62,[[1]],this.grid);a.repeat=!0,this.backgroundMaps.push(a),ig.music.add(this.music),window.addEventListener("keydown",this.keydown.bind(this),!1),ig.input.bind(ig.KEY.ENTER,"ok"),ig.input.bind(ig.KEY.SPACE,"ok"),ig.input.bind(ig.KEY.MOUSE1,"click"),ig.input.bind(ig.KEY.BACKSPACE,"void"),ig.input.bind(ig.KEY.ESC,"menu"),ig.input.bind(ig.KEY.UP_ARROW,"up"),ig.input.bind(ig.KEY.DOWN_ARROW,"down"),ig.input.bind(ig.KEY.LEFT_ARROW,"left"),ig.input.bind(ig.KEY.RIGHT_ARROW,"right"),this.setTitle(),window.focus(),ig.system.canvas.onclick=function(){window.focus()}},reset:function(){this.entities=[],this.currentTarget=null,this.wave=ig.copy(ZType.WAVES[this.difficulty]);for(var a="a".charCodeAt(0),b="z".charCodeAt(0),c=a;b>=c;c++)this.targets[String.fromCharCode(c)]=[];this.score=0,this.rs=0,this.streak=0,this.hits=0,this.misses=0,this.kills=0,this.multiplier=1,this.gameTime=0,this.lastKillTimer=new ig.Timer,this.spawnTimer=new ig.Timer,this.waveEndTimer=null},nextWave:function(){this.wave.wave++,this.wave.spawnWait=(.97*this.wave.spawnWait).limit(.2,1),this.wave.spawn=[];for(var a=0,b=0;b<this.wave.types.length;b++){var c=this.wave.types[b];c.count-=a,0==this.wave.wave%c.incEvery&&(c.count++,a++);for(var d=0;d<c.count;d++)this.wave.spawn.push(b)}this.wave.spawn.sort(function(){return Math.random()-.5})},spawnCurrentWave:function(){if(this.wave.spawn.length){if(this.spawnTimer.delta()>this.wave.spawnWait){this.spawnTimer.reset();var a=this.wave.types[this.wave.spawn.pop()].type,b=Math.random().map(0,1,10,ig.system.width-10),c=-30;this.spawnEntity(a,b,c,{healthBoost:this.wave.healthBoost})}}else this.entities.length<=1&&!this.waveEndTimer?this.waveEndTimer=new ig.Timer(2):this.waveEndTimer&&this.waveEndTimer.delta()>0&&(this.waveEndTimer=null,this.nextWave())},registerTarget:function(a,b){this.targets[a].push(b)},unregisterTarget:function(a,b){this.targets[a].erase(b)},keydown:function(a){if("text"==a.target.type||a.ctrlKey||a.shiftKey||a.altKey||this.mode!=ZType.MODE.GAME||this.menu)return!0;var b=a.which;if(!(b>64&&91>b||b>96&&123>b))return!0;a.stopPropagation(),a.preventDefault();var c=String.fromCharCode(b).toLowerCase();if(!this.currentTarget){for(var d=this.targets[c],e=-1,f=null,g=0;g<d.length;g++){var h=this.player.distanceTo(d[g]);(e>h||!f)&&(e=h,f=d[g])}f?f.target():(this.player.miss(),this.multiplier=1,this.streak=0,this.misses++)}if(this.currentTarget){var b=this.currentTarget,i=this.currentTarget.isHitBy(c);i?(this.player.shoot(b),this.score+=this.multiplier,this.hits++,this.streak++,ZType.MULTIPLIER_TIERS[this.streak]&&(this.multiplier+=1),b.dead&&this.kills++):(this.player.miss(),this.multiplier=1,this.streak=0,this.misses++)}return!1},setGame:function(){this.reset(),this.menu=null,this.player=this.spawnEntity(EntityPlayer,ig.system.width/2,ig.system.height-50),this.mode=ZType.MODE.GAME,this.nextWave(),ig.music.play()},setGameOver:function(){this.mode=ZType.MODE.GAME_OVER,this.menu=new GameOverMenu},setTitle:function(){this.reset(),this.mode=ZType.MODE.TITLE,this.menu=new TitleMenu},toggleMenu:function(){this.menu=this.mode==ZType.MODE.TITLE?this.menu instanceof TitleMenu?new PauseMenu:new TitleMenu:this.menu?null:new PauseMenu},update:function(){ig.input.pressed("menu")&&!this.menu&&this.toggleMenu(),(!this.menu||(this.backgroundMaps[0].scroll.y-=100*ig.system.tick,this.menu.update(),this.menu instanceof GameOverMenu))&&(this.parent(),this.mode==ZType.MODE.GAME?this.spawnCurrentWave():ig.input.pressed("ok")&&(this.mode==ZType.MODE.TITLE?this.setGame():this.setTitle()),this.yScroll-=100*ig.system.tick,this.backgroundMaps[0].scroll.y=this.yScroll,this.entities.length>1&&this.mode==ZType.MODE.GAME&&(this.gameTime+=ig.system.tick),(this.score-this.rs>100||1!=ig.Timer.timeScale)&&(this.score=0),this.rs=this.score)},draw:function(){this.backdrop.draw(0,0);var a=this.lastKillTimer.delta();ig.system.context.globalAlpha=0>a?-2*a+.3:.3;for(var b=0;b<this.backgroundMaps.length;b++)this.backgroundMaps[b].draw();ig.system.context.globalAlpha=1;for(var b=0;b<this.entities.length;b++)this.entities[b].draw();for(var b=0;b<this.entities.length;b++)this.entities[b].drawLabel&&this.entities[b].drawLabel();this.mode==ZType.MODE.GAME?this.drawUI():this.mode==ZType.MODE.TITLE?this.drawTitle():this.mode==ZType.MODE.GAME_OVER&&this.drawGameOver(),this.menu&&this.menu.draw()},drawUI:function(){var a="("+this.multiplier+"x) "+this.score.zeroFill(6);if(this.fontScore.draw(a,ig.system.width-4,ig.system.height-12,ig.Font.ALIGN.RIGHT),this.waveEndTimer){var b=-this.waveEndTimer.delta(),c=b>1.7?b.map(2,1.7,0,1):1>b?b.map(1,0,1,0):1,d=ig.system.width/2,e=ig.system.height/3+(1>b?Math.cos(1-b).map(1,0,0,250):0),f=this.wave.wave.zeroFill(3);ig.system.context.globalAlpha=c,this.fontTitle.draw(String.fromCharCode(134)+" "+f+" "+String.fromCharCode(135),d,e,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1}},drawTitle:function(){var a=ig.system.width/2,b=ig.system.height/4;this.fontTitle.draw(String.fromCharCode(142),a,b,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=.8,this.font.draw(String.fromCharCode(127),a,b+90,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1;var c=8,d=ig.system.height-40;ig.system.context.globalAlpha=.6,this.font.draw("Concept, Graphics & Programming: Dominic Szablewski",c,d),this.font.draw("Music: Andreas Loesch",c,d+20),ig.system.context.globalAlpha=1},drawGameOver:function(){var a=ig.system.width/2,b=ig.system.height/4,c=this.hits?100*(this.hits/(this.hits+this.misses)):0,d=this.kills/(this.gameTime/60);this.fontTitle.draw(String.fromCharCode(136),a,b,ig.Font.ALIGN.CENTER),this.fontTitle.draw(String.fromCharCode(137)+" "+this.score.zeroFill(6),a,b+90,ig.Font.ALIGN.CENTER),this.font.draw(String.fromCharCode(138)+" "+c.round(1)+"%",a,b+144,ig.Font.ALIGN.CENTER),this.font.draw(String.fromCharCode(139)+" "+d.round(1),a,b+168,ig.Font.ALIGN.CENTER)}}),ZType.MODE={TITLE:0,GAME:1,GAME_OVER:2},ZType.MULTIPLIER_TIERS={25:2,50:3,100:4},ZType.WAVES={NORMAL:{wave:0,spawn:[],spawnWait:1,healthBoost:0,types:[{type:EntityEnemyOppressor,count:0,incEvery:13},{type:EntityEnemyDestroyer,count:0,incEvery:5},{type:EntityEnemyMine,count:3,incEvery:2}]},EXPERT:{wave:0,spawn:[],spawnWait:.7,healthBoost:0,types:[{type:EntityEnemyOppressor,count:1,incEvery:7},{type:EntityEnemyDestroyer,count:2,incEvery:3},{type:EntityEnemyMine,count:9,incEvery:1}]}},ig.System.drawMode=ig.System.DRAW.SMOOTH,ZType.startGame=function(){ig.main("#canvas",ZType,60,400,600,1,ig.ImpactSplashLoader)}});